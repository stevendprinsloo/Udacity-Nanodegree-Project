{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorList.vue","mtime":1654945173246},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js","mtime":1618407608051},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICJAL2FwaSI7CmltcG9ydCB7IExvYWRpbmdBbmltYXRpb24gfSBmcm9tICJAL2NvbXBvbmVudHMvc2hhcmVkIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb3ZpZUxpc3QiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RvckRhdGE6IG51bGwsCiAgICAgIGlzTG9hZGluZzogdHJ1ZSwKICAgICAgZXJyb3I6IG51bGwsCiAgICAgIHBhZ2VzOiBudWxsLAogICAgICBzYXZpbmc6IGZhbHNlLAogICAgICBwYWdlOiAxLAogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmdBbmltYXRpb24sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkQWN0b3JzKCk7CiAgfSwKICB3YXRjaDogewogICAgYXV0aExvYWRpbmcodikgewogICAgICBpZiAoIXYpIHsKICAgICAgICB0aGlzLmxvYWRBY3RvcnMoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJhcHBfbG9naW4iIH0pOwogICAgICB9CiAgICB9LAogICAgcGFnZSgpIHsKICAgICAgY29uc29sZS5sb2coInBhZ2UgY2hhbmdlZCwgbG9hZCBtb3ZpZXMiKTsKICAgICAgdGhpcy5sb2FkQWN0b3JzKCk7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBhZ2VOdW1iZXJzKCkgewogICAgICBjb25zdCBwYWdlcyA9IFtdOwogICAgICBsZXQgcGFnZSA9IDA7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5wYWdlczsgaSsrKSB7CiAgICAgICAgcGFnZSsrOwogICAgICAgIHBhZ2VzLnB1c2gocGFnZSk7CiAgICAgICAgY29uc29sZS5sb2cocGFnZXMpOwogICAgICB9CiAgICAgIHJldHVybiBwYWdlczsKICAgIH0sCiAgICBwZXJtaXNzaW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbImdldFBlcm1pc3Npb25zIl07CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgc2V0UGFnZShwYWdlKSB7CiAgICAgIHRoaXMucGFnZSA9IHBhZ2U7CiAgICAgIGNvbnNvbGUubG9nKCJwYWdlIiwgcGFnZSk7CiAgICB9LAogICAgYXN5bmMgbG9hZEFjdG9ycygpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKQogICAgICAgIC5hY3RvcnMoKQogICAgICAgIC5nZXRBbGwodGhpcy5wYWdlKTsKICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICB0aGlzLmFjdG9yRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5wYWdlcyA9IHJlc3BvbnNlLnBhZ2VzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3IgPSAiRmFpbGVkIHRvIGxvYWQgYWN0b3JzIjsKICAgICAgfQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["ActorList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ActorList.vue","sourceRoot":"src/components/actors","sourcesContent":["<template>\n  <div class=\"\">\n    <div class=\"d-flex align-items-center py-4 border-bottom\">\n      <h3 class=\"mb-0 me-4\">Actors</h3>\n      <router-link\n        v-if=\"permissions.includes('add:actor')\"\n        tag=\"button\"\n        :to=\"{ name: 'app_actors_new' }\"\n        class=\"btn btn-primary ms-auto\"\n      >\n        <i class=\"bi bi-plus-circle me-1\"></i>\n        <span>Add Actor</span>\n      </router-link>\n    </div>\n\n    <div class=\"mt-2\">\n      <template v-if=\"isLoading\">\n        <LoadingAnimation />\n      </template>\n      <template v-else-if=\"error\">\n        <p>{{ error }}</p>\n      </template>\n      <template v-else-if=\"!actorData\">\n        There are currently no actors in the system\n      </template>\n      <template v-else-if=\"!actorData.length\">\n        <p>Could not find any actors.</p>\n      </template>\n      <template v-else>\n        <!--        <pre>-->\n        <!--          {{ actorData }}-->\n        <!--        </pre>-->\n        <table class=\"table table-hover mt-5\">\n          <thead class=\"bg-transparent\">\n            <tr>\n              <th scope=\"col\"></th>\n              <th scope=\"col\">Name</th>\n              <th scope=\"col\">Age</th>\n              <th scope=\"col\">Gender</th>\n              <th scope=\"col\" class=\"text-center\">Castings</th>\n              <th scope=\"col\"><i class=\"bi bi-sliders\"></i></th>\n            </tr>\n          </thead>\n          <tbody class=\"border table-light rounded-2 overflow-hidden\">\n            <template v-for=\"actor in actorData\">\n              <router-link\n                tag=\"tr\"\n                :to=\"{ name: 'app_actors_view', params: { id: actor.id } }\"\n                class=\"hoverable\"\n                :key=\"actor.id\"\n              >\n                <td class=\"align-middle\">\n                  <template v-if=\"actor.image\">\n                    <img\n                      class=\"rounded-circle\"\n                      style=\"object-fit: cover; width: 40px; height: 40px\"\n                      :src=\"actor.image\"\n                      :alt=\"actor.name\"\n                    />\n                  </template>\n                  <template v-else>\n                    <i class=\"bi bi-person-circle fs-4 ms-2\"></i>\n                  </template>\n                </td>\n                <td class=\"align-middle\">\n                  <router-link\n                    class=\"text-decoration-none text-black fw-bold\"\n                    :to=\"{ name: 'app_actors_view', params: { id: actor.id } }\"\n                    >{{ actor.name }}</router-link\n                  >\n                </td>\n                <td class=\"align-middle\">{{ actor.age }}</td>\n                <td class=\"align-middle\">\n                  <span class=\"badge bg-lighter-grey text-grey\">{{\n                    actor.gender.split(\"\")[0].toUpperCase()\n                  }}</span>\n                </td>\n                <td class=\"text-center align-middle\">\n                  {{ actor.castings ? actor.castings.length : \"-\" }}\n                </td>\n                <td class=\"align-middle\">\n                  <router-link\n                    :to=\"{ name: 'app_actors_view', params: { id: actor.id } }\"\n                    class=\"btn btn-sm btn-outline-secondary me-2\"\n                    >View</router-link\n                  >\n                  <router-link\n                    v-if=\"permissions.includes('edit:actor')\"\n                    :to=\"{ name: 'app_actors_edit', params: { id: actor.id } }\"\n                    class=\"btn btn-sm btn-outline-secondary\"\n                    >Edit</router-link\n                  >\n                </td>\n              </router-link>\n            </template>\n          </tbody>\n        </table>\n        <div>\n          <nav aria-label=\"Page Navigation\" class=\"mt-4\">\n            <ul class=\"pagination\">\n              <li class=\"page-item\">\n                <a\n                  class=\"page-link\"\n                  @click=\"setPage(page - 1)\"\n                  :class=\"{ disabled: page <= 1 }\"\n                  href=\"#\"\n                  aria-label=\"Previous\"\n                >\n                  <span aria-hidden=\"true\">\n                    <i class=\"bi bi-arrow-left\"></i>\n                  </span>\n                </a>\n              </li>\n              <template v-for=\"(pageNumber, index) in pageNumbers\">\n                <li :key=\"index\" class=\"page-item\">\n                  <a\n                    @click=\"setPage(pageNumber)\"\n                    class=\"page-link\"\n                    :class=\"{ active: page === pageNumber }\"\n                    href=\"#\"\n                  >\n                    {{ pageNumber }}\n                  </a>\n                </li>\n              </template>\n              <li class=\"page-item\">\n                <a\n                  class=\"page-link\"\n                  @click=\"setPage(page + 1)\"\n                  :class=\"{ disabled: page >= pages }\"\n                  href=\"#\"\n                  aria-label=\"Next\"\n                >\n                  <span aria-hidden=\"true\">\n                    <i class=\"bi bi-arrow-right\"></i>\n                  </span>\n                </a>\n              </li>\n            </ul>\n          </nav>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport { ApiService } from \"@/api\";\nimport { LoadingAnimation } from \"@/components/shared\";\nexport default {\n  name: \"MovieList\",\n  data() {\n    return {\n      actorData: null,\n      isLoading: true,\n      error: null,\n      pages: null,\n      saving: false,\n      page: 1,\n    };\n  },\n  components: {\n    LoadingAnimation,\n  },\n  created() {\n    this.loadActors();\n  },\n  watch: {\n    authLoading(v) {\n      if (!v) {\n        this.loadActors();\n      } else {\n        this.$router.push({ name: \"app_login\" });\n      }\n    },\n    page() {\n      console.log(\"page changed, load movies\");\n      this.loadActors();\n    },\n  },\n  computed: {\n    pageNumbers() {\n      const pages = [];\n      let page = 0;\n      for (let i = 0; i < this.pages; i++) {\n        page++;\n        pages.push(page);\n        console.log(pages);\n      }\n      return pages;\n    },\n    permissions() {\n      return this.$store.getters[\"getPermissions\"];\n    },\n  },\n  methods: {\n    setPage(page) {\n      this.page = page;\n      console.log(\"page\", page);\n    },\n    async loadActors() {\n      this.isLoading = true;\n      const response = await ApiService.getInstance()\n        .actors()\n        .getAll(this.page);\n      if (response.success) {\n        this.actorData = response.data;\n        this.pages = response.pages;\n      } else {\n        this.error = \"Failed to load actors\";\n      }\n      this.isLoading = false;\n    },\n  },\n};\n</script>\n"]}]}