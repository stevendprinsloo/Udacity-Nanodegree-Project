{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js!/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorList.vue","mtime":1654945173246},{"path":"/home/steven/workspace/casting-agency-frontend/babel.config.js","mtime":1652640712513},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js","mtime":1618407608051},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0ZXZlbi93b3Jrc3BhY2UvY2FzdGluZy1hZ2VuY3ktZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IHsgTG9hZGluZ0FuaW1hdGlvbiB9IGZyb20gIkAvY29tcG9uZW50cy9zaGFyZWQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1vdmllTGlzdCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFjdG9yRGF0YTogbnVsbCwKICAgICAgaXNMb2FkaW5nOiB0cnVlLAogICAgICBlcnJvcjogbnVsbCwKICAgICAgcGFnZXM6IG51bGwsCiAgICAgIHNhdmluZzogZmFsc2UsCiAgICAgIHBhZ2U6IDEKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nQW5pbWF0aW9uOiBMb2FkaW5nQW5pbWF0aW9uCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkQWN0b3JzKCk7CiAgfSwKICB3YXRjaDogewogICAgYXV0aExvYWRpbmc6IGZ1bmN0aW9uIGF1dGhMb2FkaW5nKHYpIHsKICAgICAgaWYgKCF2KSB7CiAgICAgICAgdGhpcy5sb2FkQWN0b3JzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImFwcF9sb2dpbiIKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHBhZ2U6IGZ1bmN0aW9uIHBhZ2UoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJwYWdlIGNoYW5nZWQsIGxvYWQgbW92aWVzIik7CiAgICAgIHRoaXMubG9hZEFjdG9ycygpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBhZ2VOdW1iZXJzOiBmdW5jdGlvbiBwYWdlTnVtYmVycygpIHsKICAgICAgdmFyIHBhZ2VzID0gW107CiAgICAgIHZhciBwYWdlID0gMDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wYWdlczsgaSsrKSB7CiAgICAgICAgcGFnZSsrOwogICAgICAgIHBhZ2VzLnB1c2gocGFnZSk7CiAgICAgICAgY29uc29sZS5sb2cocGFnZXMpOwogICAgICB9CgogICAgICByZXR1cm4gcGFnZXM7CiAgICB9LAogICAgcGVybWlzc2lvbnM6IGZ1bmN0aW9uIHBlcm1pc3Npb25zKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1siZ2V0UGVybWlzc2lvbnMiXTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldFBhZ2U6IGZ1bmN0aW9uIHNldFBhZ2UocGFnZSkgewogICAgICB0aGlzLnBhZ2UgPSBwYWdlOwogICAgICBjb25zb2xlLmxvZygicGFnZSIsIHBhZ2UpOwogICAgfSwKICAgIGxvYWRBY3RvcnM6IGZ1bmN0aW9uIGxvYWRBY3RvcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLmFjdG9ycygpLmdldEFsbChfdGhpcy5wYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmFjdG9yRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgICAgICAgIF90aGlzLnBhZ2VzID0gcmVzcG9uc2UucGFnZXM7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvciA9ICJGYWlsZWQgdG8gbG9hZCBhY3RvcnMiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;EACAA,iBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,eADA;MAEAC,eAFA;MAGAC,WAHA;MAIAC,WAJA;MAKAC,aALA;MAMAC;IANA;EAQA,CAXA;EAYAC;IACAC;EADA,CAZA;EAeAC,OAfA,qBAeA;IACA;EACA,CAjBA;EAkBAC;IACAC,WADA,uBACAC,CADA,EACA;MACA;QACA;MACA,CAFA,MAEA;QACA;UAAAb;QAAA;MACA;IACA,CAPA;IAQAO,IARA,kBAQA;MACAO;MACA;IACA;EAXA,CAlBA;EA+BAC;IACAC,WADA,yBACA;MACA;MACA;;MACA;QACAT;QACAF;QACAS;MACA;;MACA;IACA,CAVA;IAWAG,WAXA,yBAWA;MACA;IACA;EAbA,CA/BA;EA8CAC;IACAC,OADA,mBACAZ,IADA,EACA;MACA;MACAO;IACA,CAJA;IAKAM,UALA,wBAKA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBADA;gBAAA,OAEAC,yBACAC,MADA,GAEAC,MAFA,CAEA,UAFA,CAFA;;cAAA;gBAEAC,QAFA;;gBAKA;kBACA;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;;gBACA;;cAXA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAYA;EAjBA;AA9CA","names":["name","data","actorData","isLoading","error","pages","saving","page","components","LoadingAnimation","created","watch","authLoading","v","console","computed","pageNumbers","permissions","methods","setPage","loadActors","ApiService","actors","getAll","response"],"sourceRoot":"src/components/actors","sources":["ActorList.vue"],"sourcesContent":["<template>\n  <div class=\"\">\n    <div class=\"d-flex align-items-center py-4 border-bottom\">\n      <h3 class=\"mb-0 me-4\">Actors</h3>\n      <router-link\n        v-if=\"permissions.includes('add:actor')\"\n        tag=\"button\"\n        :to=\"{ name: 'app_actors_new' }\"\n        class=\"btn btn-primary ms-auto\"\n      >\n        <i class=\"bi bi-plus-circle me-1\"></i>\n        <span>Add Actor</span>\n      </router-link>\n    </div>\n\n    <div class=\"mt-2\">\n      <template v-if=\"isLoading\">\n        <LoadingAnimation />\n      </template>\n      <template v-else-if=\"error\">\n        <p>{{ error }}</p>\n      </template>\n      <template v-else-if=\"!actorData\">\n        There are currently no actors in the system\n      </template>\n      <template v-else-if=\"!actorData.length\">\n        <p>Could not find any actors.</p>\n      </template>\n      <template v-else>\n        <!--        <pre>-->\n        <!--          {{ actorData }}-->\n        <!--        </pre>-->\n        <table class=\"table table-hover mt-5\">\n          <thead class=\"bg-transparent\">\n            <tr>\n              <th scope=\"col\"></th>\n              <th scope=\"col\">Name</th>\n              <th scope=\"col\">Age</th>\n              <th scope=\"col\">Gender</th>\n              <th scope=\"col\" class=\"text-center\">Castings</th>\n              <th scope=\"col\"><i class=\"bi bi-sliders\"></i></th>\n            </tr>\n          </thead>\n          <tbody class=\"border table-light rounded-2 overflow-hidden\">\n            <template v-for=\"actor in actorData\">\n              <router-link\n                tag=\"tr\"\n                :to=\"{ name: 'app_actors_view', params: { id: actor.id } }\"\n                class=\"hoverable\"\n                :key=\"actor.id\"\n              >\n                <td class=\"align-middle\">\n                  <template v-if=\"actor.image\">\n                    <img\n                      class=\"rounded-circle\"\n                      style=\"object-fit: cover; width: 40px; height: 40px\"\n                      :src=\"actor.image\"\n                      :alt=\"actor.name\"\n                    />\n                  </template>\n                  <template v-else>\n                    <i class=\"bi bi-person-circle fs-4 ms-2\"></i>\n                  </template>\n                </td>\n                <td class=\"align-middle\">\n                  <router-link\n                    class=\"text-decoration-none text-black fw-bold\"\n                    :to=\"{ name: 'app_actors_view', params: { id: actor.id } }\"\n                    >{{ actor.name }}</router-link\n                  >\n                </td>\n                <td class=\"align-middle\">{{ actor.age }}</td>\n                <td class=\"align-middle\">\n                  <span class=\"badge bg-lighter-grey text-grey\">{{\n                    actor.gender.split(\"\")[0].toUpperCase()\n                  }}</span>\n                </td>\n                <td class=\"text-center align-middle\">\n                  {{ actor.castings ? actor.castings.length : \"-\" }}\n                </td>\n                <td class=\"align-middle\">\n                  <router-link\n                    :to=\"{ name: 'app_actors_view', params: { id: actor.id } }\"\n                    class=\"btn btn-sm btn-outline-secondary me-2\"\n                    >View</router-link\n                  >\n                  <router-link\n                    v-if=\"permissions.includes('edit:actor')\"\n                    :to=\"{ name: 'app_actors_edit', params: { id: actor.id } }\"\n                    class=\"btn btn-sm btn-outline-secondary\"\n                    >Edit</router-link\n                  >\n                </td>\n              </router-link>\n            </template>\n          </tbody>\n        </table>\n        <div>\n          <nav aria-label=\"Page Navigation\" class=\"mt-4\">\n            <ul class=\"pagination\">\n              <li class=\"page-item\">\n                <a\n                  class=\"page-link\"\n                  @click=\"setPage(page - 1)\"\n                  :class=\"{ disabled: page <= 1 }\"\n                  href=\"#\"\n                  aria-label=\"Previous\"\n                >\n                  <span aria-hidden=\"true\">\n                    <i class=\"bi bi-arrow-left\"></i>\n                  </span>\n                </a>\n              </li>\n              <template v-for=\"(pageNumber, index) in pageNumbers\">\n                <li :key=\"index\" class=\"page-item\">\n                  <a\n                    @click=\"setPage(pageNumber)\"\n                    class=\"page-link\"\n                    :class=\"{ active: page === pageNumber }\"\n                    href=\"#\"\n                  >\n                    {{ pageNumber }}\n                  </a>\n                </li>\n              </template>\n              <li class=\"page-item\">\n                <a\n                  class=\"page-link\"\n                  @click=\"setPage(page + 1)\"\n                  :class=\"{ disabled: page >= pages }\"\n                  href=\"#\"\n                  aria-label=\"Next\"\n                >\n                  <span aria-hidden=\"true\">\n                    <i class=\"bi bi-arrow-right\"></i>\n                  </span>\n                </a>\n              </li>\n            </ul>\n          </nav>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport { ApiService } from \"@/api\";\nimport { LoadingAnimation } from \"@/components/shared\";\nexport default {\n  name: \"MovieList\",\n  data() {\n    return {\n      actorData: null,\n      isLoading: true,\n      error: null,\n      pages: null,\n      saving: false,\n      page: 1,\n    };\n  },\n  components: {\n    LoadingAnimation,\n  },\n  created() {\n    this.loadActors();\n  },\n  watch: {\n    authLoading(v) {\n      if (!v) {\n        this.loadActors();\n      } else {\n        this.$router.push({ name: \"app_login\" });\n      }\n    },\n    page() {\n      console.log(\"page changed, load movies\");\n      this.loadActors();\n    },\n  },\n  computed: {\n    pageNumbers() {\n      const pages = [];\n      let page = 0;\n      for (let i = 0; i < this.pages; i++) {\n        page++;\n        pages.push(page);\n        console.log(pages);\n      }\n      return pages;\n    },\n    permissions() {\n      return this.$store.getters[\"getPermissions\"];\n    },\n  },\n  methods: {\n    setPage(page) {\n      this.page = page;\n      console.log(\"page\", page);\n    },\n    async loadActors() {\n      this.isLoading = true;\n      const response = await ApiService.getInstance()\n        .actors()\n        .getAll(this.page);\n      if (response.success) {\n        this.actorData = response.data;\n        this.pages = response.pages;\n      } else {\n        this.error = \"Failed to load actors\";\n      }\n      this.isLoading = false;\n    },\n  },\n};\n</script>\n"]}]}