{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorSingle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorSingle.vue","mtime":1652733510837},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdlbmRlcnMgfSBmcm9tICJAL2NvbnN0IjsKaW1wb3J0IHsgQkZvcm0sIEJGb3JtSW5wdXQsIEJGb3JtU2VsZWN0IH0gZnJvbSAiYm9vdHN0cmFwLXZ1ZSI7CmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICJAL2FwaSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFjdG9yU2luZ2xlIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0b3JEYXRhOiBudWxsLAogICAgICBnZW5kZXJzOiBnZW5kZXJzLAogICAgICBpc0xvYWRpbmc6IHRydWUsCiAgICAgIGVycm9yOiBudWxsLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy4kcm91dGUubmFtZS5zdGFydHNXaXRoKCJhcHBfYWN0b3JzX25ldyIpKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuYWN0b3JEYXRhID0gewogICAgICAgIG5hbWU6IG51bGwsCiAgICAgICAgYWdlOiBudWxsLAogICAgICAgIGdlbmRlcjogbnVsbCwKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMubG9hZEFjdG9yKCk7CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBCRm9ybSwKICAgIEJGb3JtSW5wdXQsCiAgICBCRm9ybVNlbGVjdCwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYWdlVGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICA/ICJFZGl0ICIgKyB0aGlzLmFjdG9yRGF0YS5uYW1lCiAgICAgICAgOiAiTmV3IEFjdG9yIjsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBsb2FkQWN0b3IoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkKICAgICAgICAuYWN0b3JzKCkKICAgICAgICAuZ2V0KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgdGhpcy5hY3RvckRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3IgPSAiRmFpbGVkIHRvIGxvYWQgYWN0b3IiOwogICAgICB9CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgYXN5bmMgc2F2ZUFjdG9yKCkgewogICAgICB0aGlzLnNhdmluZyA9IHRydWU7CgogICAgICBsZXQgcmVzcG9uc2U7CgogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBBcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkKICAgICAgICAgIC5hY3RvcnMoKQogICAgICAgICAgLnVwZGF0ZSh0aGlzLiRyb3V0ZS5wYXJhbXMsIHRoaXMuYWN0b3JEYXRhKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXNwb25zZSA9IGF3YWl0IEFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKQogICAgICAgICAgLmFjdG9ycygpCiAgICAgICAgICAuY3JlYXRlKHRoaXMuYWN0b3JEYXRhKTsKICAgICAgfQoKICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICBhd2FpdCB0aGlzLiRyb3V0ZXIucHVzaCh7IG5hbWU6ICJhcHBfYWN0b3JzX2xpc3QiIH0pOwogICAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSAiRXJyb3Igd2hlbiB1cGRhdGluZyBhY3RvciI7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSAiRXJyb3Igd2hlbiBzYXZpbmcgYWN0b3IiOwogICAgICAgIH0KICAgICAgfQoKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5zYXZpbmcgPSBmYWxzZTsKICAgICAgfSwgNTAwKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ActorSingle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ActorSingle.vue","sourceRoot":"src/components/actors","sourcesContent":["<template>\n  <div>\n    <div class=\"d-flex align-items-center py-4 border-bottom\">\n      <h3 class=\"mb-0 me-4\">{{ pageTitle }}</h3>\n    </div>\n    <div class=\"mt-2\">\n      <div class=\"alert alert-warning\" v-if=\"error\">\n        {{ error }}\n      </div>\n      <BForm>\n        <div class=\"row\">\n          <div class=\"col col-auto\">\n            <BFormInput\n              v-model=\"actorData.name\"\n              placeholder=\"Actor Full Name\"\n            ></BFormInput>\n          </div>\n          <div class=\"col col-auto\">\n            <BFormInput\n              v-model=\"actorData.age\"\n              placeholder=\"Age\"\n              type=\"number\"\n            ></BFormInput>\n          </div>\n          <div class=\"col col-auto\">\n            <BFormSelect\n              class=\"form-select\"\n              v-model=\"actorData.gender\"\n              :options=\"genders\"\n            />\n          </div>\n        </div>\n\n        <button class=\"btn btn-primary mt-3\" @click.prevent=\"saveActor\">\n          <span>Save Actor</span>\n        </button>\n      </BForm>\n    </div>\n  </div>\n</template>\n<script>\nimport { genders } from \"@/const\";\nimport { BForm, BFormInput, BFormSelect } from \"bootstrap-vue\";\nimport { ApiService } from \"@/api\";\n\nexport default {\n  name: \"ActorSingle\",\n  data() {\n    return {\n      actorData: null,\n      genders: genders,\n      isLoading: true,\n      error: null,\n    };\n  },\n  created() {\n    if (this.$route.name.startsWith(\"app_actors_new\")) {\n      this.isLoading = false;\n      this.actorData = {\n        name: null,\n        age: null,\n        gender: null,\n      };\n    } else {\n      this.loadActor();\n    }\n  },\n  components: {\n    BForm,\n    BFormInput,\n    BFormSelect,\n  },\n  computed: {\n    pageTitle() {\n      return this.$route.params.id\n        ? \"Edit \" + this.actorData.name\n        : \"New Actor\";\n    },\n  },\n  methods: {\n    async loadActor() {\n      this.isLoading = true;\n      const response = await ApiService.getInstance()\n        .actors()\n        .get(this.$route.params.id);\n      if (response.success) {\n        this.actorData = response.data;\n      } else {\n        this.error = \"Failed to load actor\";\n      }\n      this.isLoading = false;\n    },\n    async saveActor() {\n      this.saving = true;\n\n      let response;\n\n      if (this.$route.params.id) {\n        response = await ApiService.getInstance()\n          .actors()\n          .update(this.$route.params, this.actorData);\n      } else {\n        response = await ApiService.getInstance()\n          .actors()\n          .create(this.actorData);\n      }\n\n      if (response.success) {\n        await this.$router.push({ name: \"app_actors_list\" });\n        this.error = null;\n      } else {\n        if (this.$route.params.id) {\n          this.error = \"Error when updating actor\";\n        } else {\n          this.error = \"Error when saving actor\";\n        }\n      }\n\n      setTimeout(() => {\n        this.saving = false;\n      }, 500);\n    },\n  },\n};\n</script>\n"]}]}