{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorSingle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/actors/ActorSingle.vue","mtime":1654080876341},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/thread-loader/dist/cjs.js","mtime":1618407608051},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdlbmRlcnMgfSBmcm9tICJAL2NvbnN0IjsKaW1wb3J0IHsgQkZvcm0sIEJGb3JtSW5wdXQsIEJGb3JtU2VsZWN0IH0gZnJvbSAiYm9vdHN0cmFwLXZ1ZSI7CmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICJAL2FwaSI7CmltcG9ydCB7IExvYWRpbmdBbmltYXRpb24gfSBmcm9tICJAL2NvbXBvbmVudHMvc2hhcmVkIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQWN0b3JTaW5nbGUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RvckRhdGE6IG51bGwsCiAgICAgIGdlbmRlcnM6IGdlbmRlcnMsCiAgICAgIGlzTG9hZGluZzogdHJ1ZSwKICAgICAgZXJyb3I6IG51bGwsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5uYW1lLnN0YXJ0c1dpdGgoImFwcF9hY3RvcnNfbmV3IikpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5hY3RvckRhdGEgPSB7CiAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICBhZ2U6IG51bGwsCiAgICAgICAgZ2VuZGVyOiBudWxsLAogICAgICAgIGltYWdlOiBudWxsLAogICAgICB9OwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5sb2FkQWN0b3IoKTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEJGb3JtLAogICAgQkZvcm1JbnB1dCwKICAgIEJGb3JtU2VsZWN0LAogICAgTG9hZGluZ0FuaW1hdGlvbiwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYWdlVGl0bGUoKSB7CiAgICAgIGlmICh0aGlzLmlzTG9hZGluZykgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgJiYgIXRoaXMuaXNMb2FkaW5nICYmIHRoaXMuYWN0b3JEYXRhKSB7CiAgICAgICAgcmV0dXJuICJFZGl0ICIgKyB0aGlzLmFjdG9yRGF0YS5uYW1lOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiTmV3IE1vdmllIjsKICAgICAgfQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUNhbmNlbENsaWNrKCkgewogICAgICBpZiAoaGlzdG9yeS5sZW5ndGgpIHsKICAgICAgICBoaXN0b3J5LmdvKC0xKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiYXBwX2FjdG9yc192aWV3IiwKICAgICAgICAgIHBhcmFtczogeyBpZDogdGhpcy5hY3RvckRhdGEuaWQgfSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiYXBwX2FjdG9yc19saXN0IiwKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGxvYWRBY3RvcigpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKQogICAgICAgIC5hY3RvcnMoKQogICAgICAgIC5nZXQodGhpcy4kcm91dGUucGFyYW1zLmlkKTsKICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICB0aGlzLmFjdG9yRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvciA9ICJGYWlsZWQgdG8gbG9hZCBhY3RvciI7CiAgICAgIH0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBhc3luYyBzYXZlQWN0b3IoKSB7CiAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTsKCiAgICAgIGxldCByZXNwb25zZTsKCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICByZXNwb25zZSA9IGF3YWl0IEFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKQogICAgICAgICAgLmFjdG9ycygpCiAgICAgICAgICAudXBkYXRlKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwgdGhpcy5hY3RvckRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc3BvbnNlID0gYXdhaXQgQXBpU2VydmljZS5nZXRJbnN0YW5jZSgpCiAgICAgICAgICAuYWN0b3JzKCkKICAgICAgICAgIC5jcmVhdGUodGhpcy5hY3RvckRhdGEpOwogICAgICB9CgogICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgIGF3YWl0IHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJhcHBfYWN0b3JzX3ZpZXciLAogICAgICAgICAgcGFyYW1zOiB7IGlkOiByZXNwb25zZS5pZCA/IHJlc3BvbnNlLmlkIDogdGhpcy5hY3RvckRhdGEuaWQgfSwKICAgICAgICB9KTsKICAgICAgICB0aGlzLmVycm9yID0gbnVsbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gIkVycm9yIHdoZW4gdXBkYXRpbmcgYWN0b3IiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gIkVycm9yIHdoZW4gc2F2aW5nIGFjdG9yIjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuc2F2aW5nID0gZmFsc2U7CiAgICAgIH0sIDUwMCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["ActorSingle.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ActorSingle.vue","sourceRoot":"src/components/actors","sourcesContent":["<template>\n  <div>\n    <div>\n      <router-link\n        class=\"btn btn-sm btn-outline-secondary me-4\"\n        :to=\"{ name: 'app_actors_list' }\"\n      >\n        <i class=\"bi-arrow-left\"></i> Back to Actors\n      </router-link>\n    </div>\n    <div class=\"d-flex align-items-center py-4 border-bottom\">\n      <h3 class=\"mb-0 me-4\">{{ pageTitle }}</h3>\n    </div>\n    <div class=\"mt-2\">\n      <template v-if=\"isLoading\">\n        <LoadingAnimation />\n      </template>\n      <template v-else-if=\"error\">\n        <div class=\"alert alert-warning\">\n          {{ error }}\n        </div>\n      </template>\n      <template v-else>\n        <BForm>\n          <div class=\"row\">\n            <div class=\"col col-auto\">\n              <label class=\"form-label\">Full Name</label>\n              <BFormInput v-model=\"actorData.name\"></BFormInput>\n            </div>\n            <div class=\"col col-auto\">\n              <label class=\"form-label\">Age</label>\n              <BFormInput v-model=\"actorData.age\" type=\"number\"></BFormInput>\n            </div>\n            <div class=\"col col-auto\">\n              <label class=\"form-label\">Select Gender</label>\n              <BFormSelect\n                class=\"form-select\"\n                v-model=\"actorData.gender\"\n                :options=\"genders\"\n              />\n            </div>\n            <div class=\"col col-auto\">\n              <label class=\"form-label\">Profile Picture Link</label>\n              <BFormInput\n                v-model=\"actorData.image\"\n                placeholder=\"http://....\"\n                type=\"text\"\n              ></BFormInput>\n            </div>\n          </div>\n\n          <button class=\"btn btn-primary mt-3\" @click.prevent=\"saveActor\">\n            <span>Save Actor</span>\n          </button>\n\n          <button\n            class=\"btn btn-outline-secondary mt-3 ms-3\"\n            @click.prevent=\"handleCancelClick\"\n          >\n            Cancel\n          </button>\n        </BForm>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport { genders } from \"@/const\";\nimport { BForm, BFormInput, BFormSelect } from \"bootstrap-vue\";\nimport { ApiService } from \"@/api\";\nimport { LoadingAnimation } from \"@/components/shared\";\n\nexport default {\n  name: \"ActorSingle\",\n  data() {\n    return {\n      actorData: null,\n      genders: genders,\n      isLoading: true,\n      error: null,\n    };\n  },\n  created() {\n    if (this.$route.name.startsWith(\"app_actors_new\")) {\n      this.isLoading = false;\n      this.actorData = {\n        name: null,\n        age: null,\n        gender: null,\n        image: null,\n      };\n    } else {\n      this.loadActor();\n    }\n  },\n  components: {\n    BForm,\n    BFormInput,\n    BFormSelect,\n    LoadingAnimation,\n  },\n  computed: {\n    pageTitle() {\n      if (this.isLoading) {\n        return \"\";\n      } else if (this.$route.params.id && !this.isLoading && this.actorData) {\n        return \"Edit \" + this.actorData.name;\n      } else {\n        return \"New Movie\";\n      }\n    },\n  },\n  methods: {\n    handleCancelClick() {\n      if (history.length) {\n        history.go(-1);\n      } else if (this.$route.params.id) {\n        this.$router.push({\n          name: \"app_actors_view\",\n          params: { id: this.actorData.id },\n        });\n      } else {\n        this.$router.push({\n          name: \"app_actors_list\",\n        });\n      }\n    },\n    async loadActor() {\n      this.isLoading = true;\n      const response = await ApiService.getInstance()\n        .actors()\n        .get(this.$route.params.id);\n      if (response.success) {\n        this.actorData = response.data;\n      } else {\n        this.error = \"Failed to load actor\";\n      }\n      this.isLoading = false;\n    },\n    async saveActor() {\n      this.saving = true;\n\n      let response;\n\n      if (this.$route.params.id) {\n        response = await ApiService.getInstance()\n          .actors()\n          .update(this.$route.params.id, this.actorData);\n      } else {\n        response = await ApiService.getInstance()\n          .actors()\n          .create(this.actorData);\n      }\n\n      if (response.success) {\n        await this.$router.push({\n          name: \"app_actors_view\",\n          params: { id: response.id ? response.id : this.actorData.id },\n        });\n        this.error = null;\n      } else {\n        if (this.$route.params.id) {\n          this.error = \"Error when updating actor\";\n        } else {\n          this.error = \"Error when saving actor\";\n        }\n      }\n\n      setTimeout(() => {\n        this.saving = false;\n      }, 500);\n    },\n  },\n};\n</script>\n"]}]}