{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/movies/MovieList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/movies/MovieList.vue","mtime":1652905814817},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICJAL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTW92aWVMaXN0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW92aWVEYXRhOiBudWxsLAogICAgICBpc0xvYWRpbmc6IHRydWUsCiAgICAgIGVycm9yOiBudWxsLAogICAgICB1bmF1dGhvcmlzZWQ6IGZhbHNlLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBhdXRoTG9hZGluZyh2KSB7CiAgICAgIGlmICghdikgewogICAgICAgIHRoaXMubG9hZE1vdmllcygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgbmFtZTogImFwcF9sb2dpbiIgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgYXV0aExvYWRpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRhdXRoLmxvYWRpbmc7CiAgICB9LAogICAgdXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbImdldEF1dGhVc2VyIl07CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICghdGhpcy5hdXRoTG9hZGluZykgewogICAgICBjb25zb2xlLmxvZygidXNlciIsIHVzZXIpOwogICAgICB0aGlzLmxvYWRNb3ZpZXMoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGxvYWRNb3ZpZXMoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgaWYgKHRoaXMudXNlci5wZXJtaXNzaW9ucy5pbmNsdWRlcygiZWRpdDptb3ZpZXMiKSkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLm1vdmllcygpLmdldEFsbCgxKTsKICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5tb3ZpZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gIkZhaWxlZCB0byBsb2FkIGFjdG9ycyI7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudW5hdXRob3Jpc2VkID0gdHJ1ZTsKICAgICAgfQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["MovieList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MovieList.vue","sourceRoot":"src/components/movies","sourcesContent":["<template>\n  <div class=\"\">\n    <div class=\"d-flex align-items-center py-4 border-bottom\">\n      <h3 class=\"mb-0 me-4\">Movies</h3>\n      <router-link\n        tag=\"button\"\n        :to=\"{ name: 'app_movies_new' }\"\n        class=\"btn btn-primary ms-auto\"\n      >\n        <i class=\"bi bi-plus-circle me-1\"></i>\n        <span>Add Movie</span>\n      </router-link>\n    </div>\n\n    <div class=\"mt-2\">\n      <template v-if=\"isLoading\">\n        <p>Loading...</p>\n      </template>\n      <template v-else-if=\"unauthorised\">\n        <p>You do not have permission to view</p>\n      </template>\n      <template v-else-if=\"error\">\n        <p>{{ error }}</p>\n      </template>\n      <template v-else>\n        <div class=\"row d-flex px-2 py-3 movie-row\">\n          <template v-for=\"movie in movieData\">\n            <router-link\n              class=\"movie-card text-decoration-none text-black p-0\"\n              :key=\"movie.id\"\n              :to=\"{ name: 'app_movies_view', params: { id: movie.id } }\"\n            >\n              <div class=\"card shadow-sm p-0\">\n                <div\n                  class=\"card-body movie-card-picture\"\n                  style=\"background: url('https://via.placeholder.com/300x250')\"\n                ></div>\n                <div class=\"card-footer\">\n                  <div class=\"d-flex\">\n                    <h4 class=\"fw-bold fs-5 text-black text-decoration-none\">\n                      {{ movie.title }}\n                    </h4>\n                    <p class=\"ms-auto text-secondary\">\n                      <i class=\"bi bi-people-fill\"></i>\n                      {{ movie.cast ? movie.cast.length : 0 }}\n                    </p>\n                  </div>\n                  <div>\n                    <span class=\"text-secondary fst-italic\">\n                      Releasing:\n                      <span>{{ movie.release_date }}</span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </router-link>\n          </template>\n          <div>\n            <!--            <pre>-->\n            <!--            {{ movieData }}-->\n            <!--          </pre-->\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport { ApiService } from \"@/api\";\nexport default {\n  name: \"MovieList\",\n  data() {\n    return {\n      movieData: null,\n      isLoading: true,\n      error: null,\n      unauthorised: false,\n    };\n  },\n  watch: {\n    authLoading(v) {\n      if (!v) {\n        this.loadMovies();\n      } else {\n        this.$router.push({ name: \"app_login\" });\n      }\n    },\n  },\n  computed: {\n    authLoading() {\n      return this.$auth.loading;\n    },\n    user() {\n      return this.$store.getters[\"getAuthUser\"];\n    },\n  },\n  created() {\n    if (!this.authLoading) {\n      console.log(\"user\", user);\n      this.loadMovies();\n    }\n  },\n  methods: {\n    async loadMovies() {\n      this.isLoading = true;\n      if (this.user.permissions.includes(\"edit:movies\")) {\n        const response = await ApiService.getInstance().movies().getAll(1);\n        if (response.success) {\n          this.movieData = response.data;\n        } else {\n          this.error = \"Failed to load actors\";\n        }\n      } else {\n        this.unauthorised = true;\n      }\n      this.isLoading = false;\n    },\n  },\n};\n</script>\n"]}]}