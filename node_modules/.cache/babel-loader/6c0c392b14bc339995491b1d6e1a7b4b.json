{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/movies/MovieView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/movies/MovieView.vue","mtime":1654945004675},{"path":"/home/steven/workspace/casting-agency-frontend/babel.config.js","mtime":1652640712513},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0ZXZlbi93b3Jrc3BhY2UvY2FzdGluZy1hZ2VuY3ktZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgQXBpU2VydmljZSB9IGZyb20gIkAvYXBpIjsKaW1wb3J0IExvYWRpbmdBbmltYXRpb24gZnJvbSAiQC9jb21wb25lbnRzL3NoYXJlZC9Mb2FkaW5nQW5pbWF0aW9uIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNb3ZpZVNpbmdsZSIsCiAgY29tcG9uZW50czogewogICAgTG9hZGluZ0FuaW1hdGlvbjogTG9hZGluZ0FuaW1hdGlvbgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vdmllRGF0YTogbnVsbCwKICAgICAgaXNMb2FkaW5nOiB0cnVlLAogICAgICBlcnJvcjogbnVsbAogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRNb3ZpZSgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBlcm1pc3Npb25zOiBmdW5jdGlvbiBwZXJtaXNzaW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbImdldFBlcm1pc3Npb25zIl07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVEZWxldGVDbGljazogZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2xpY2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkubW92aWVzKCkuZGVsZXRlKF90aGlzLiRyb3V0ZS5wYXJhbXMuaWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBuYW1lOiAiYXBwX21vdmllc19saXN0IgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gIkZhaWxlZCB0byBkZWxldGUgbW92aWUiOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZE1vdmllOiBmdW5jdGlvbiBsb2FkTW92aWUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkubW92aWVzKCkuZ2V0KF90aGlzMi4kcm91dGUucGFyYW1zLmlkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfdGhpczIubW92aWVEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5lcnJvciA9ICJGYWlsZWQgdG8gbG9hZCBtb3ZpZSI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXMyLmlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AAEA;EACAA,mBADA;EAEAC;IAAAC;EAAA,CAFA;EAGAC,IAHA,kBAGA;IACA;MACAC,eADA;MAEAC,eAFA;MAGAC;IAHA;EAKA,CATA;EAUAC,OAVA,qBAUA;IACA;EACA,CAZA;EAaAC;IACAC,WADA,yBACA;MACA;IACA;EAHA,CAbA;EAkBAC;IACAC,iBADA,+BACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACAC,yBACAC,MADA,GAEAC,MAFA,CAEA,sBAFA,CADA;;cAAA;gBACAC,QADA;;gBAAA,KAIAA,gBAJA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAKA;kBAAAf;gBAAA,EALA;;cAAA;gBAAA;gBAAA;;cAAA;gBAOA;;cAPA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IASA,CAVA;IAWAgB,SAXA,uBAWA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBADA;gBAAA,OAEAJ,yBACAC,MADA,GAEAI,GAFA,CAEA,uBAFA,CAFA;;cAAA;gBAEAF,QAFA;;gBAKA;kBACA;gBACA,CAFA,MAEA;kBACA;gBACA;;gBACA;;cAVA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAWA;EAtBA;AAlBA","names":["name","components","LoadingAnimation","data","movieData","isLoading","error","created","computed","permissions","methods","handleDeleteClick","ApiService","movies","delete","response","loadMovie","get"],"sourceRoot":"src/components/movies","sources":["MovieView.vue"],"sourcesContent":["<template>\n  <div>\n    <template v-if=\"isLoading\">\n      <LoadingAnimation />\n    </template>\n    <template v-else-if=\"error\">\n      <div class=\"alert alert-warning\" v-if=\"error\">\n        {{ error }}\n      </div>\n    </template>\n    <template v-else>\n      <div>\n        <router-link\n          class=\"btn btn-sm btn-outline-secondary me-4\"\n          :to=\"{ name: 'app_movies_list' }\"\n          ><i class=\"bi-arrow-left\"></i> Back\n        </router-link>\n      </div>\n      <div class=\"d-flex align-items-center py-4 border-bottom\">\n        <h3 class=\"mb-0 me-4\">{{ movieData.title }}</h3>\n        <router-link\n          class=\"btn btn-secondary ms-auto me-2\"\n          v-if=\"permissions.includes('edit:movie')\"\n          :to=\"{ name: 'app_movies_edit', params: { id: movieData.id } }\"\n          >Edit movie</router-link\n        >\n        <button\n          v-if=\"permissions.includes('delete:movie')\"\n          class=\"btn btn-outline-danger\"\n          @click=\"handleDeleteClick\"\n        >\n          Delete\n        </button>\n      </div>\n      <div class=\"mt-2\">\n        <div class=\"row\">\n          <div class=\"col-auto col-auto\">\n            <img\n              style=\"max-width: 250px; width: 100%\"\n              :src=\"\n                movieData.image\n                  ? movieData.image\n                  : `https://via.placeholder.com/180x220`\n              \"\n              class=\"rounded shadow-sm\"\n              alt=\"\"\n            />\n          </div>\n          <div class=\"col-auto p-2\">\n            <p class=\"fw-bold mb-1\">Cast Size:</p>\n            <p>{{ movieData.cast.length }}</p>\n            <p class=\"fw-bold mb-1\">Release Date:</p>\n            <p>{{ movieData.release_date }}</p>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col col-12\">\n            <h5 class=\"mt-5 mb-3\">Movie Castings</h5>\n            <template v-if=\"movieData.cast && movieData.cast.length\">\n              <table class=\"table\">\n                <thead>\n                  <tr class=\"text-secondary\">\n                    <th>#</th>\n                    <th>Actor</th>\n                    <th>Age</th>\n                    <th>Gender</th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody class=\"border-1 table-light\">\n                  <template v-for=\"casting in movieData.cast\">\n                    <tr :key=\"casting.id\" class=\"\">\n                      <td class=\"align-middle\">\n                        <template v-if=\"casting.image\">\n                          <img\n                            class=\"rounded-circle\"\n                            style=\"object-fit: cover; width: 40px; height: 40px\"\n                            :src=\"casting.image\"\n                            :alt=\"casting.name\"\n                          />\n                        </template>\n                        <template v-else>\n                          <i class=\"bi bi-person-circle fs-4 ms-2\"></i>\n                        </template>\n                      </td>\n                      <td class=\"align-middle\">{{ casting.name }}</td>\n                      <td class=\"align-middle\">{{ casting.age }}</td>\n                      <td class=\"align-middle\">\n                        <span class=\"badge bg-lighter-grey text-grey\">\n                          {{ casting.gender.split(\"\")[0].toUpperCase() }}\n                        </span>\n                      </td>\n                      <td class=\"align-middle\">\n                        <router-link\n                          class=\"btn btn-sm btn-outline-secondary\"\n                          :to=\"{\n                            name: 'app_actors_view',\n                            params: { id: casting.id },\n                          }\"\n                        >\n                          View Actor\n                        </router-link>\n                      </td>\n                    </tr>\n                  </template>\n                </tbody>\n              </table>\n            </template>\n            <template v-else>\n              <p class=\"text-secondary\">\n                This movie currently has no actors cast for it.\n              </p>\n            </template>\n          </div>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n<script>\nimport { ApiService } from \"@/api\";\nimport LoadingAnimation from \"@/components/shared/LoadingAnimation\";\n\nexport default {\n  name: \"MovieSingle\",\n  components: { LoadingAnimation },\n  data() {\n    return {\n      movieData: null,\n      isLoading: true,\n      error: null,\n    };\n  },\n  created() {\n    this.loadMovie();\n  },\n  computed: {\n    permissions() {\n      return this.$store.getters[\"getPermissions\"];\n    },\n  },\n  methods: {\n    async handleDeleteClick() {\n      const response = await ApiService.getInstance()\n        .movies()\n        .delete(this.$route.params.id);\n      if (response.success) {\n        await this.$router.push({ name: \"app_movies_list\" });\n      } else {\n        this.error = \"Failed to delete movie\";\n      }\n    },\n    async loadMovie() {\n      this.isLoading = true;\n      const response = await ApiService.getInstance()\n        .movies()\n        .get(this.$route.params.id);\n      if (response.success) {\n        this.movieData = response.data;\n      } else {\n        this.error = \"Failed to load movie\";\n      }\n      this.isLoading = false;\n    },\n  },\n};\n</script>\n"]}]}