{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/Dashboard.vue","mtime":1654090730469},{"path":"/home/steven/workspace/casting-agency-frontend/babel.config.js","mtime":1652640712513},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0ZXZlbi93b3Jrc3BhY2UvY2FzdGluZy1hZ2VuY3ktZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IEJhc2VQYWdlIH0gZnJvbSAiQC9jb21wb25lbnRzIjsKaW1wb3J0IHsgTG9hZGluZ0FuaW1hdGlvbiB9IGZyb20gIkAvY29tcG9uZW50cy9zaGFyZWQiOwppbXBvcnQgeyBBcGlTZXJ2aWNlIH0gZnJvbSAiQC9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkRhc2hib2FyZCIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vdmllRGF0YTogbnVsbCwKICAgICAgbW92aWVUb3RhbDogbnVsbCwKICAgICAgYWN0b3JEYXRhOiBudWxsLAogICAgICBhY3RvclRvdGFsOiBudWxsLAogICAgICBpc0xvYWRpbmc6IHsKICAgICAgICBhY3RvcnM6IHRydWUsCiAgICAgICAgbW92aWVzOiB0cnVlCiAgICAgIH0sCiAgICAgIGVycm9yOiB7CiAgICAgICAgYWN0b3JzOiBudWxsLAogICAgICAgIG1vdmllczogbnVsbAogICAgICB9LAogICAgICB1bmF1dGhvcmlzZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQmFzZVBhZ2U6IEJhc2VQYWdlLAogICAgTG9hZGluZ0FuaW1hdGlvbjogTG9hZGluZ0FuaW1hdGlvbgogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZEFjdG9ycygpOwogICAgdGhpcy5sb2FkTW92aWVzKCk7CiAgfSwKICB3YXRjaDogewogICAgYXV0aExvYWRpbmc6IGZ1bmN0aW9uIGF1dGhMb2FkaW5nKHYpIHsKICAgICAgaWYgKCF2KSB7CiAgICAgICAgdGhpcy5sb2FkTW92aWVzKCk7CiAgICAgICAgdGhpcy5sb2FkQWN0b3JzKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImFwcF9sb2dpbiIKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGF1dGhMb2FkaW5nOiBmdW5jdGlvbiBhdXRoTG9hZGluZygpIHsKICAgICAgcmV0dXJuIHRoaXMuJGF1dGgubG9hZGluZzsKICAgIH0sCiAgICBwZXJtaXNzaW9uczogZnVuY3Rpb24gcGVybWlzc2lvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJnZXRQZXJtaXNzaW9ucyJdOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZEFjdG9yczogZnVuY3Rpb24gbG9hZEFjdG9ycygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZy5hY3RvcnMgPSB0cnVlOwoKICAgICAgICAgICAgICAgIGlmICghX3RoaXMucGVybWlzc2lvbnMuaW5jbHVkZXMoImxpc3Q6YWN0b3JzIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5hY3RvcnMoKS5nZXRBbGwoMSwgImJ5X2Nhc3RpbmdzIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RvckRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICBfdGhpcy5hY3RvclRvdGFsID0gcmVzcG9uc2UudG90YWw7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvci5hY3RvcnMgPSAiRmFpbGVkIHRvIGxvYWQgYWN0b3JzIjsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBfdGhpcy51bmF1dGhvcmlzZWQgPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfdGhpcy5pc0xvYWRpbmcuYWN0b3JzID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZE1vdmllczogZnVuY3Rpb24gbG9hZE1vdmllcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMi5pc0xvYWRpbmcubW92aWVzID0gdHJ1ZTsKCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5wZXJtaXNzaW9ucy5pbmNsdWRlcygibGlzdDptb3ZpZXMiKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJjYW4gZmV0Y2ggbW92aWVzIik7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5nZXRJbnN0YW5jZSgpLm1vdmllcygpLmdldEFsbCgxLCAiYnlfZGF0ZSIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5tb3ZpZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAgICAgICBfdGhpczIubW92aWVUb3RhbCA9IHJlc3BvbnNlLnRvdGFsOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMyLmVycm9yLm1vdmllcyA9ICJGYWlsZWQgdG8gbG9hZCBtb3ZpZXMiOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX3RoaXMyLnVuYXV0aG9yaXNlZCA9IHRydWU7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpczIuaXNMb2FkaW5nLm1vdmllcyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiOA;AACA;AACA;AAEA;EACAA,iBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,eADA;MAEAC,gBAFA;MAGAC,eAHA;MAIAC,gBAJA;MAKAC;QACAC,YADA;QAEAC;MAFA,CALA;MASAC;QACAF,YADA;QAEAC;MAFA,CATA;MAaAE;IAbA;EAeA,CAlBA;EAmBAC;IACAC,kBADA;IAEAC;EAFA,CAnBA;EAuBAC,OAvBA,qBAuBA;IACA;IACA;EACA,CA1BA;EA2BAC;IACAC,WADA,uBACAC,CADA,EACA;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;UAAAjB;QAAA;MACA;IACA;EARA,CA3BA;EAqCAkB;IACAF,WADA,yBACA;MACA;IACA,CAHA;IAIAG,WAJA,yBAIA;MACA;IACA;EANA,CArCA;EA6CAC;IACAC,UADA,wBACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBADA,KAEA,yCAFA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAGAC,yBACAf,MADA,GAEAgB,MAFA,CAEA,CAFA,EAEA,aAFA,CAHA;;cAAA;gBAGAC,QAHA;;gBAMA;kBACA;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;;gBAXA;gBAAA;;cAAA;gBAaA;;cAbA;gBAeA;;cAfA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAgBA,CAjBA;IAkBAC,UAlBA,wBAkBA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBADA,KAEA,0CAFA;kBAAA;kBAAA;gBAAA;;gBAGAC;gBAHA;gBAAA,OAIAJ,yBACAd,MADA,GAEAe,MAFA,CAEA,CAFA,EAEA,SAFA,CAJA;;cAAA;gBAIAC,QAJA;;gBAOA;kBACA;kBACA;gBACA,CAHA,MAGA;kBACA;gBACA;;gBAZA;gBAAA;;cAAA;gBAcA;;cAdA;gBAgBA;;cAhBA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAiBA;EAnCA;AA7CA","names":["name","data","movieData","movieTotal","actorData","actorTotal","isLoading","actors","movies","error","unauthorised","components","BasePage","LoadingAnimation","created","watch","authLoading","v","computed","permissions","methods","loadActors","ApiService","getAll","response","loadMovies","console"],"sourceRoot":"src/components","sources":["Dashboard.vue"],"sourcesContent":["<template>\n  <BasePage>\n    <template #main>\n      <div class=\"d-flex align-items-center py-4 border-bottom\">\n        <h3 class=\"mb-0 me-4\">Dashboard</h3>\n      </div>\n      <div class=\"mt-2\">\n        <div class=\"row mt-4\">\n          <div class=\"col-6\">\n            <router-link\n              :to=\"{ name: 'app_movies_list' }\"\n              class=\"d-block text-decoration-none text-black card-link\"\n            >\n              <div class=\"card rounded-3\">\n                <div class=\"card-body d-flex align-items-center px-4 py-4\">\n                  <div class=\"\">\n                    <h4 class=\"mb-3 d-flex align-items-center\">\n                      <i class=\"bi bi-camera-reels me-2\"></i> Manage movies\n                    </h4>\n                    <p class=\"text-secondary mb-0\">\n                      Current number of movies: {{ movieTotal }}\n                    </p>\n                  </div>\n                  <div class=\"d-flex ms-auto\">\n                    <i class=\"bi bi-arrow-right-circle fs-3\"></i>\n                  </div>\n                </div>\n              </div>\n            </router-link>\n          </div>\n          <div class=\"col-6\">\n            <router-link\n              :to=\"{ name: 'app_actors_list' }\"\n              class=\"d-block text-decoration-none text-black card-link\"\n            >\n              <div class=\"card rounded-3\">\n                <div class=\"card-body d-flex align-items-center px-4 py-4\">\n                  <div class=\"\">\n                    <h4 class=\"mb-3 d-flex align-items-center\">\n                      <i class=\"bi bi-people me-2\"></i> Manage actors\n                    </h4>\n                    <p class=\"text-secondary mb-0\">\n                      Current number of movies: {{ actorTotal }}\n                    </p>\n                  </div>\n                  <div class=\"d-flex ms-auto\">\n                    <i class=\"bi bi-arrow-right-circle fs-3\"></i>\n                  </div>\n                </div>\n              </div>\n            </router-link>\n          </div>\n        </div>\n        <div class=\"row mt-4 border-top pt-4\">\n          <div class=\"col-12 d-flex flex-wrap\">\n            <!--                Movies -->\n            <div class=\"p-3 w-50\">\n              <template v-if=\"isLoading.movies\">\n                <LoadingAnimation />\n              </template>\n              <template v-else-if=\"error.movies\">\n                <p>{{ error.movies }}</p>\n              </template>\n              <template v-else-if=\"!movieData\">\n                There are currently no actors in the system\n              </template>\n              <template v-else>\n                <div class=\"mt-3\">\n                  <h5>Upcoming Movies</h5>\n                </div>\n                <table class=\"table table-hover mt-3\">\n                  <thead class=\"bg-transparent\">\n                    <tr>\n                      <th scope=\"col\"></th>\n                      <th scope=\"col\">Title</th>\n                      <th scope=\"col\" class=\"text-center\">Release Date</th>\n                      <th scope=\"col\"></th>\n                    </tr>\n                  </thead>\n                  <tbody class=\"border table-light rounded-2 overflow-hidden\">\n                    <template v-for=\"movie in movieData\">\n                      <router-link\n                        tag=\"tr\"\n                        :to=\"{\n                          name: 'app_movies_view',\n                          params: { id: movie.id },\n                        }\"\n                        class=\"hoverable\"\n                        :key=\"movie.id\"\n                      >\n                        <td class=\"align-middle\">\n                          <template v-if=\"movie.image\">\n                            <img\n                              class=\"rounded\"\n                              style=\"\n                                object-fit: cover;\n                                width: 40px;\n                                height: 60px;\n                              \"\n                              :src=\"movie.image\"\n                              :alt=\"movie.title\"\n                            />\n                          </template>\n                          <template v-else>\n                            <i class=\"bi bi-film fs-4 ms-2\"></i>\n                          </template>\n                        </td>\n                        <td class=\"align-middle\">\n                          <router-link\n                            class=\"text-decoration-none text-black fw-bold\"\n                            :to=\"{\n                              name: 'app_movies_view',\n                              params: { id: movie.id },\n                            }\"\n                            >{{ movie.title }}\n                          </router-link>\n                        </td>\n                        <td class=\"text-center align-middle\">\n                          {{ movie.release_date }}\n                        </td>\n                        <td class=\"align-middle\">\n                          <router-link\n                            :to=\"{\n                              name: 'app_movies_view',\n                              params: { id: movie.id },\n                            }\"\n                            class=\"btn btn-sm btn-outline-secondary\"\n                            >View</router-link\n                          >\n                        </td>\n                      </router-link>\n                    </template>\n                  </tbody>\n                </table>\n              </template>\n            </div>\n            <!--                Actors-->\n            <div class=\"p-3 w-50\">\n              <template v-if=\"isLoading.actors\">\n                <LoadingAnimation />\n              </template>\n              <template v-else-if=\"error.actors\">\n                <p>{{ error.actors }}</p>\n              </template>\n              <template v-else-if=\"!actorData\">\n                There are currently no actors in the system\n              </template>\n              <template v-else>\n                <div class=\"mt-3\">\n                  <h5>Most Cast Actors</h5>\n                </div>\n                <table class=\"table table-hover mt-3\">\n                  <thead class=\"bg-transparent\">\n                    <tr>\n                      <th scope=\"col\"></th>\n                      <th scope=\"col\">Name</th>\n                      <th scope=\"col\" class=\"text-center\">Castings</th>\n                      <th scope=\"col\"></th>\n                    </tr>\n                  </thead>\n                  <tbody class=\"border table-light rounded-2 overflow-hidden\">\n                    <template v-for=\"actor in actorData\">\n                      <router-link\n                        tag=\"tr\"\n                        :to=\"{\n                          name: 'app_actors_view',\n                          params: { id: actor.id },\n                        }\"\n                        class=\"hoverable\"\n                        :key=\"actor.id\"\n                      >\n                        <td class=\"align-middle\">\n                          <template v-if=\"actor.image\">\n                            <img\n                              class=\"rounded-circle\"\n                              style=\"\n                                object-fit: cover;\n                                width: 40px;\n                                height: 40px;\n                              \"\n                              :src=\"actor.image\"\n                              :alt=\"actor.name\"\n                            />\n                          </template>\n                          <template v-else>\n                            <i class=\"bi bi-person-circle fs-4 ms-2\"></i>\n                          </template>\n                        </td>\n                        <td class=\"align-middle\">\n                          <router-link\n                            class=\"text-decoration-none text-black fw-bold\"\n                            :to=\"{\n                              name: 'app_actors_view',\n                              params: { id: actor.id },\n                            }\"\n                            >{{ actor.name }}</router-link\n                          >\n                        </td>\n                        <td class=\"text-center align-middle\">\n                          {{ actor.castings ? actor.castings.length : \"-\" }}\n                        </td>\n                        <td class=\"align-middle\">\n                          <router-link\n                            :to=\"{\n                              name: 'app_actors_view',\n                              params: { id: actor.id },\n                            }\"\n                            class=\"btn btn-sm btn-outline-secondary\"\n                            >View</router-link\n                          >\n                        </td>\n                      </router-link>\n                    </template>\n                  </tbody>\n                </table>\n              </template>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </BasePage>\n</template>\n\n<script>\nimport { BasePage } from \"@/components\";\nimport { LoadingAnimation } from \"@/components/shared\";\nimport { ApiService } from \"@/api\";\n\nexport default {\n  name: \"Dashboard\",\n  data() {\n    return {\n      movieData: null,\n      movieTotal: null,\n      actorData: null,\n      actorTotal: null,\n      isLoading: {\n        actors: true,\n        movies: true,\n      },\n      error: {\n        actors: null,\n        movies: null,\n      },\n      unauthorised: false,\n    };\n  },\n  components: {\n    BasePage,\n    LoadingAnimation,\n  },\n  created() {\n    this.loadActors();\n    this.loadMovies();\n  },\n  watch: {\n    authLoading(v) {\n      if (!v) {\n        this.loadMovies();\n        this.loadActors();\n      } else {\n        this.$router.push({ name: \"app_login\" });\n      }\n    },\n  },\n  computed: {\n    authLoading() {\n      return this.$auth.loading;\n    },\n    permissions() {\n      return this.$store.getters[\"getPermissions\"];\n    },\n  },\n  methods: {\n    async loadActors() {\n      this.isLoading.actors = true;\n      if (this.permissions.includes(\"list:actors\")) {\n        const response = await ApiService.getInstance()\n          .actors()\n          .getAll(1, \"by_castings\");\n        if (response.success) {\n          this.actorData = response.data;\n          this.actorTotal = response.total;\n        } else {\n          this.error.actors = \"Failed to load actors\";\n        }\n      } else {\n        this.unauthorised = true;\n      }\n      this.isLoading.actors = false;\n    },\n    async loadMovies() {\n      this.isLoading.movies = true;\n      if (this.permissions.includes(\"list:movies\")) {\n        console.log(\"can fetch movies\");\n        const response = await ApiService.getInstance()\n          .movies()\n          .getAll(1, \"by_date\");\n        if (response.success) {\n          this.movieData = response.data;\n          this.movieTotal = response.total;\n        } else {\n          this.error.movies = \"Failed to load movies\";\n        }\n      } else {\n        this.unauthorised = true;\n      }\n      this.isLoading.movies = false;\n    },\n  },\n};\n</script>\n"]}]}