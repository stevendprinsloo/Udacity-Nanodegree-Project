{"remainingRequest":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/steven/workspace/casting-agency-frontend/src/components/movies/MovieList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/steven/workspace/casting-agency-frontend/src/components/movies/MovieList.vue","mtime":1652905814817},{"path":"/home/steven/workspace/casting-agency-frontend/babel.config.js","mtime":1652640712513},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-plugin-babel/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/babel-loader/lib/index.js","mtime":1650889791270},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1618407608009},{"path":"/home/steven/workspace/casting-agency-frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1634219578329}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3N0ZXZlbi93b3Jrc3BhY2UvY2FzdGluZy1hZ2VuY3ktZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IEFwaVNlcnZpY2UgfSBmcm9tICJAL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTW92aWVMaXN0IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW92aWVEYXRhOiBudWxsLAogICAgICBpc0xvYWRpbmc6IHRydWUsCiAgICAgIGVycm9yOiBudWxsLAogICAgICB1bmF1dGhvcmlzZWQ6IGZhbHNlCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGF1dGhMb2FkaW5nOiBmdW5jdGlvbiBhdXRoTG9hZGluZyh2KSB7CiAgICAgIGlmICghdikgewogICAgICAgIHRoaXMubG9hZE1vdmllcygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIG5hbWU6ICJhcHBfbG9naW4iCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBhdXRoTG9hZGluZzogZnVuY3Rpb24gYXV0aExvYWRpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLiRhdXRoLmxvYWRpbmc7CiAgICB9LAogICAgdXNlcjogZnVuY3Rpb24gdXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbImdldEF1dGhVc2VyIl07CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKCF0aGlzLmF1dGhMb2FkaW5nKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ1c2VyIiwgdXNlcik7CiAgICAgIHRoaXMubG9hZE1vdmllcygpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgbG9hZE1vdmllczogZnVuY3Rpb24gbG9hZE1vdmllcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZyA9IHRydWU7CgogICAgICAgICAgICAgICAgaWYgKCFfdGhpcy51c2VyLnBlcm1pc3Npb25zLmluY2x1ZGVzKCJlZGl0Om1vdmllcyIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLmdldEluc3RhbmNlKCkubW92aWVzKCkuZ2V0QWxsKDEpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMubW92aWVEYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gIkZhaWxlZCB0byBsb2FkIGFjdG9ycyI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgX3RoaXMudW5hdXRob3Jpc2VkID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;EACAA,iBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,eADA;MAEAC,eAFA;MAGAC,WAHA;MAIAC;IAJA;EAMA,CATA;EAUAC;IACAC,WADA,uBACAC,CADA,EACA;MACA;QACA;MACA,CAFA,MAEA;QACA;UAAAR;QAAA;MACA;IACA;EAPA,CAVA;EAmBAS;IACAF,WADA,yBACA;MACA;IACA,CAHA;IAIAG,IAJA,kBAIA;MACA;IACA;EANA,CAnBA;EA2BAC,OA3BA,qBA2BA;IACA;MACAC;MACA;IACA;EACA,CAhCA;EAiCAC;IACAC,UADA,wBACA;MAAA;;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;;gBADA,KAEA,8CAFA;kBAAA;kBAAA;gBAAA;;gBAAA;gBAAA,OAGAC,2CAHA;;cAAA;gBAGAC,QAHA;;gBAIA;kBACA;gBACA,CAFA,MAEA;kBACA;gBACA;;gBARA;gBAAA;;cAAA;gBAUA;;cAVA;gBAYA;;cAZA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAaA;EAdA;AAjCA","names":["name","data","movieData","isLoading","error","unauthorised","watch","authLoading","v","computed","user","created","console","methods","loadMovies","ApiService","response"],"sourceRoot":"src/components/movies","sources":["MovieList.vue"],"sourcesContent":["<template>\n  <div class=\"\">\n    <div class=\"d-flex align-items-center py-4 border-bottom\">\n      <h3 class=\"mb-0 me-4\">Movies</h3>\n      <router-link\n        tag=\"button\"\n        :to=\"{ name: 'app_movies_new' }\"\n        class=\"btn btn-primary ms-auto\"\n      >\n        <i class=\"bi bi-plus-circle me-1\"></i>\n        <span>Add Movie</span>\n      </router-link>\n    </div>\n\n    <div class=\"mt-2\">\n      <template v-if=\"isLoading\">\n        <p>Loading...</p>\n      </template>\n      <template v-else-if=\"unauthorised\">\n        <p>You do not have permission to view</p>\n      </template>\n      <template v-else-if=\"error\">\n        <p>{{ error }}</p>\n      </template>\n      <template v-else>\n        <div class=\"row d-flex px-2 py-3 movie-row\">\n          <template v-for=\"movie in movieData\">\n            <router-link\n              class=\"movie-card text-decoration-none text-black p-0\"\n              :key=\"movie.id\"\n              :to=\"{ name: 'app_movies_view', params: { id: movie.id } }\"\n            >\n              <div class=\"card shadow-sm p-0\">\n                <div\n                  class=\"card-body movie-card-picture\"\n                  style=\"background: url('https://via.placeholder.com/300x250')\"\n                ></div>\n                <div class=\"card-footer\">\n                  <div class=\"d-flex\">\n                    <h4 class=\"fw-bold fs-5 text-black text-decoration-none\">\n                      {{ movie.title }}\n                    </h4>\n                    <p class=\"ms-auto text-secondary\">\n                      <i class=\"bi bi-people-fill\"></i>\n                      {{ movie.cast ? movie.cast.length : 0 }}\n                    </p>\n                  </div>\n                  <div>\n                    <span class=\"text-secondary fst-italic\">\n                      Releasing:\n                      <span>{{ movie.release_date }}</span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </router-link>\n          </template>\n          <div>\n            <!--            <pre>-->\n            <!--            {{ movieData }}-->\n            <!--          </pre-->\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n<script>\nimport { ApiService } from \"@/api\";\nexport default {\n  name: \"MovieList\",\n  data() {\n    return {\n      movieData: null,\n      isLoading: true,\n      error: null,\n      unauthorised: false,\n    };\n  },\n  watch: {\n    authLoading(v) {\n      if (!v) {\n        this.loadMovies();\n      } else {\n        this.$router.push({ name: \"app_login\" });\n      }\n    },\n  },\n  computed: {\n    authLoading() {\n      return this.$auth.loading;\n    },\n    user() {\n      return this.$store.getters[\"getAuthUser\"];\n    },\n  },\n  created() {\n    if (!this.authLoading) {\n      console.log(\"user\", user);\n      this.loadMovies();\n    }\n  },\n  methods: {\n    async loadMovies() {\n      this.isLoading = true;\n      if (this.user.permissions.includes(\"edit:movies\")) {\n        const response = await ApiService.getInstance().movies().getAll(1);\n        if (response.success) {\n          this.movieData = response.data;\n        } else {\n          this.error = \"Failed to load actors\";\n        }\n      } else {\n        this.unauthorised = true;\n      }\n      this.isLoading = false;\n    },\n  },\n};\n</script>\n"]}]}