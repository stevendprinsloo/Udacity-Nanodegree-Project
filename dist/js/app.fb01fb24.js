(function(t){function e(e){for(var s,i,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00f5":function(t,e,a){},1:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("3e48");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},r=[];console.log("Process",Object({NODE_ENV:"production",VUE_APP_API_URL:"https://sdprin-casting-agency-backend.herokuapp.com/",BASE_URL:"/"}));var i={},o=i,c=(a("5c0b"),a("0c7c")),l=Object(c["a"])(o,n,r,!1,null,null,null),u=l.exports,d=(a("ddb8"),a("1da1")),p=(a("96cf"),a("8c4f")),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrapper"},[a("Navbar"),a("section",{staticClass:"main-content"},[a("div",{staticClass:"container py-3"},[t._t("main")],2)])],1)},h=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("div",{staticClass:"px-3 bg-dark text-white"},[a("div",{staticClass:"container"},[a("div",{staticClass:"d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start"},[a("router-link",{staticClass:"d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none",attrs:{to:{name:"app_dashboard"}}},[a("h4",{staticClass:"fw-bolder"},[t._v("Thats-A-Wrap")])]),a("ul",{staticClass:"nav col-12 col-lg-auto my-2 justify-content-center my-md-0 text-small me-4"},[a("li",[a("router-link",{staticClass:"nav-link text-white py-3",class:{active:t.$route.name.startsWith("app_dashboard")},attrs:{to:{name:"app_dashboard"}}},[a("i",{staticClass:"bi bi-speedometer d-block mx-auto mb-1 text-center fs-4",class:{},staticStyle:{"line-height":"0.5"}}),t._v(" Dashboard ")])],1),a("li",[a("router-link",{staticClass:"nav-link text-white py-3",class:{active:t.$route.name.startsWith("app_movie")},attrs:{to:{name:"app_movies_list"}}},[a("i",{staticClass:"bi d-block mx-auto mb-1 text-center fs-4",class:t.$route.name.startsWith("app_movies")?"bi-camera-reels-fill":"bi-camera-reels",staticStyle:{"line-height":"0.5"}}),t._v(" Movies ")])],1),a("li",[a("router-link",{staticClass:"nav-link text-white py-3",class:{active:t.$route.name.startsWith("app_actor")},attrs:{to:{name:"app_actors_list"}}},[a("i",{staticClass:"bi d-block mx-auto mb-1 text-center fs-4",class:t.$route.name.startsWith("app_actors")?"bi-people-fill":"bi-people",staticStyle:{"line-height":"0.5"}}),t._v(" Actors ")])],1)]),a("div",{staticClass:"flex-shrink-0 dropdown"},[a("a",{ref:"profileToggle",staticClass:"d-block link-dark text-decoration-none dropdown-toggle text-white",attrs:{id:"dropdownUser2","data-bs-toggle":"dropdown","aria-expanded":"false"},on:{click:function(e){return t.dropDown.toggle()}}},[a("img",{staticClass:"rounded-circle",attrs:{src:t.user.picture?t.user.picture:"https://via.placeholder.com/35x35",alt:"mdo",width:"32",height:"32"}})]),a("ul",{staticClass:"dropdown-menu text-small shadow",attrs:{"aria-labelledby":"dropdownUser2"}},[a("li",[a("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"app_profile"}}},[t._v("Profile")])],1),t._m(0),a("li",[a("a",{staticClass:"dropdown-item hoverable",on:{click:t.logout}},[t._v("Sign out")])])])])],1)])])]),t.isSigningOut?a("div",{staticClass:"position-fixed bg-light w-100 h-100 d-flex align-items-center justify-content-center",staticStyle:{"z-index":"99999",top:"0",left:"0"}},[t._m(1)]):t._e()])},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("hr",{staticClass:"dropdown-divider"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card p-4 shadow-sm"},[a("div",{staticClass:"card-body d-flex align-items-center justify-content-center flex-column"},[a("div",[a("span",{staticClass:"spinner-border me-4",staticStyle:{width:"1.2rem",height:"1.2rem"},attrs:{role:"status"}}),a("span",[t._v("Signing Out...")])])])])}],f=a("7b17"),b={name:"TheNavbar",data:function(){return{dropDown:null,isSigningOut:!1}},mounted:function(){this.$refs&&this.initialiseDropDown(this.$refs.profileToggle)},computed:{user:function(){return this.$auth.user}},methods:{initialiseDropDown:function(t){this.dropDown=new f["a"](t)},logout:function(){this.isSigningOut=!0,this.$auth.logout({returnTo:window.location.origin})}}},_=b,C=Object(c["a"])(_,v,g,!1,null,null,null),w=C.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100 h-100 d-flex align-items-center justify-content-center bg-light",class:{"position-fixed":t.overlay},staticStyle:{"min-height":"200px","z-index":"9999",left:"0",top:"0"}},[t._m(0)])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",{staticClass:"spinner-border me-4",staticStyle:{width:"1.2rem",height:"1.2rem"},attrs:{role:"status"}}),a("span",[t._v("Loading...")])])}],y={name:"LoadingAnimation",computed:{overlay:function(){return"overlay"in this.$attrs}}},R=y,D=Object(c["a"])(R,x,k,!1,null,null,null),A=D.exports,$={name:"BasePage",components:{Navbar:w},computed:{pageTitle:function(){return this.$route.meta.pageTitle}}},O=$,j=Object(c["a"])(O,m,h,!1,null,null,null),S=j.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasePage",{scopedSlots:t._u([{key:"main",fn:function(){return[a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v("Dashboard")])]),a("div",{staticClass:"mt-2"},[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-6"},[a("router-link",{staticClass:"d-block text-decoration-none text-black card-link",attrs:{to:{name:"app_movies_list"}}},[a("div",{staticClass:"card rounded-3"},[a("div",{staticClass:"card-body d-flex align-items-center px-4 py-4"},[a("div",{},[a("h4",{staticClass:"mb-3 d-flex align-items-center"},[a("i",{staticClass:"bi bi-camera-reels me-2"}),t._v(" Manage movies ")]),a("p",{staticClass:"text-secondary mb-0"},[t._v(" Current number of movies: "+t._s(t.movieTotal)+" ")])]),a("div",{staticClass:"d-flex ms-auto"},[a("i",{staticClass:"bi bi-arrow-right-circle fs-3"})])])])])],1),a("div",{staticClass:"col-6"},[a("router-link",{staticClass:"d-block text-decoration-none text-black card-link",attrs:{to:{name:"app_actors_list"}}},[a("div",{staticClass:"card rounded-3"},[a("div",{staticClass:"card-body d-flex align-items-center px-4 py-4"},[a("div",{},[a("h4",{staticClass:"mb-3 d-flex align-items-center"},[a("i",{staticClass:"bi bi-people me-2"}),t._v(" Manage actors ")]),a("p",{staticClass:"text-secondary mb-0"},[t._v(" Current number of movies: "+t._s(t.actorTotal)+" ")])]),a("div",{staticClass:"d-flex ms-auto"},[a("i",{staticClass:"bi bi-arrow-right-circle fs-3"})])])])])],1)]),a("div",{staticClass:"row mt-4 border-top pt-4"},[a("div",{staticClass:"col-12 d-flex flex-wrap"},[a("div",{staticClass:"p-3 w-50"},[t.isLoading.movies?[a("LoadingAnimation")]:t.error.movies?[a("p",[t._v(t._s(t.error.movies))])]:t.movieData?[a("div",{staticClass:"mt-3"},[a("h5",[t._v("Upcoming Movies")])]),a("table",{staticClass:"table table-hover mt-3"},[a("thead",{staticClass:"bg-transparent"},[a("tr",[a("th",{attrs:{scope:"col"}}),a("th",{attrs:{scope:"col"}},[t._v("Title")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Release Date")]),a("th",{attrs:{scope:"col"}})])]),a("tbody",{staticClass:"border table-light rounded-2 overflow-hidden"},[t._l(t.movieData,(function(e){return[a("router-link",{key:e.id,staticClass:"hoverable",attrs:{tag:"tr",to:{name:"app_movies_view",params:{id:e.id}}}},[a("td",{staticClass:"align-middle"},[e.image?[a("img",{staticClass:"rounded",staticStyle:{"object-fit":"cover",width:"40px",height:"60px"},attrs:{src:e.image,alt:e.title}})]:[a("i",{staticClass:"bi bi-film fs-4 ms-2"})]],2),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"text-decoration-none text-black fw-bold",attrs:{to:{name:"app_movies_view",params:{id:e.id}}}},[t._v(t._s(e.title)+" ")])],1),a("td",{staticClass:"text-center align-middle"},[t._v(" "+t._s(e.release_date)+" ")]),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:{name:"app_movies_view",params:{id:e.id}}}},[t._v("View")])],1)])]}))],2)])]:[t._v(" There are currently no actors in the system ")]],2),a("div",{staticClass:"p-3 w-50"},[t.isLoading.actors?[a("LoadingAnimation")]:t.error.actors?[a("p",[t._v(t._s(t.error.actors))])]:t.actorData?[a("div",{staticClass:"mt-3"},[a("h5",[t._v("Most Cast Actors")])]),a("table",{staticClass:"table table-hover mt-3"},[a("thead",{staticClass:"bg-transparent"},[a("tr",[a("th",{attrs:{scope:"col"}}),a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Castings")]),a("th",{attrs:{scope:"col"}})])]),a("tbody",{staticClass:"border table-light rounded-2 overflow-hidden"},[t._l(t.actorData,(function(e){return[a("router-link",{key:e.id,staticClass:"hoverable",attrs:{tag:"tr",to:{name:"app_actors_view",params:{id:e.id}}}},[a("td",{staticClass:"align-middle"},[e.image?[a("img",{staticClass:"rounded-circle",staticStyle:{"object-fit":"cover",width:"40px",height:"40px"},attrs:{src:e.image,alt:e.name}})]:[a("i",{staticClass:"bi bi-person-circle fs-4 ms-2"})]],2),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"text-decoration-none text-black fw-bold",attrs:{to:{name:"app_actors_view",params:{id:e.id}}}},[t._v(t._s(e.name))])],1),a("td",{staticClass:"text-center align-middle"},[t._v(" "+t._s(e.castings?e.castings.length:"-")+" ")]),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:{name:"app_actors_view",params:{id:e.id}}}},[t._v("View")])],1)])]}))],2)])]:[t._v(" There are currently no actors in the system ")]],2)])])])]},proxy:!0}])})},P=[],T=(a("caad"),a("2532"),a("d4ec")),E=a("bee2"),I=a("53ca"),M=a("4328"),U=a.n(M),B=function(){function t(){Object(T["a"])(this,t)}return Object(E["a"])(t,[{key:"getAll",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e,a){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="/actors?page=".concat(e),a&&"object"===Object(I["a"])(a)?(n=U.a.stringify(a),s+="&".concat(n),console.log("QUERY IS:",a),console.log("URL IS:",s)):a&&"string"===typeof a&&(s+="&".concat(a),console.log("QUERY IS:",a),console.log("URL IS:",s)),t.abrupt("return",Y.get(s));case 3:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"get",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.get("/actors/".concat(e)));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"create",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.post("/actors/create",e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.patch("/actors/".concat(e),a));case 1:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"delete",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.delete("/actors/".concat(e)));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),F=(a("b64b"),function(){function t(){Object(T["a"])(this,t)}return Object(E["a"])(t,[{key:"getAll",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e,a){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s="/movies?page=".concat(e),a&&"object"===Object(I["a"])(a)&&Object.keys(a).length?(n=U.a.stringify(a),s+="&".concat(n)):a&&"string"===typeof a&&(s+="&".concat(a),console.log("MOVIE QUERY IS:",a),console.log("MOVIE URL IS:",s)),t.abrupt("return",Y.get(s));case 3:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"get",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.get("/movies/".concat(e)));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"create",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.post("/movies/create",e));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.patch("/movies/".concat(e),a));case 1:case"end":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"delete",value:function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",Y.delete("/movies/".concat(e)));case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}()),N=function(){function t(){Object(T["a"])(this,t)}return Object(E["a"])(t,[{key:"actors",value:function(){return new B}},{key:"movies",value:function(){return new F}}],[{key:"getInstance",value:function(){return this.apiService||(this.apiService=new t),this.apiService}}]),t}(),W=(a("2ca0"),a("8a79"),a("99af"),a("bc3a")),V=a.n(W),q={OK:200,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404},z=[{text:"Select Gender"},{text:"Male",value:"male"},{text:"Female",value:"female"},{text:"Other",value:"other"}],G=a("2f62");s["default"].use(G["a"]);var J=new G["a"].Store({state:{accessToken:null,user:null,reloadedPath:null,isReloaded:!1,permissions:null},getters:{getAccessToken:function(t){return t.accessToken},getAuthUser:function(t){return t.user},getReloadedPath:function(t){return t.reloadedPath},getIsReloaded:function(t){return t.isReloaded},getPermissions:function(t){return t.permissions}},mutations:{setAccessToken:function(t,e){t.accessToken=e},setAuthUser:function(t,e){t.user=e},setAuthPermissions:function(t,e){t.permissions=e},setReloadedPath:function(t,e){t.reloadedPath=e},setIsReloaded:function(t,e){t.isReloaded=e}},actions:{setAccessToken:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t.commit,s("setAccessToken",e);case 2:case"end":return a.stop()}}),a)})))()},setAuthUser:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t.commit,s("setAuthUser",e);case 2:case"end":return a.stop()}}),a)})))()},setReloadedPath:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t.commit,s("setReloadedPath",e);case 2:case"end":return a.stop()}}),a)})))()},setIsReloaded:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t.commit,s("setIsReloaded",e);case 2:case"end":return a.stop()}}),a)})))()},setAuthPermissions:function(t,e){return Object(d["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=t.commit,s("setAuthPermissions",e);case 2:case"end":return a.stop()}}),a)})))()}},modules:{}});console.log("ENV PROCESS 02========================",Object({NODE_ENV:"production",VUE_APP_API_URL:"https://sdprin-casting-agency-backend.herokuapp.com/",BASE_URL:"/"})),V.a.defaults.baseURL="https://sdprin-casting-agency-backend.herokuapp.com/",V.a.defaults.withCredentials=!0,V.a.defaults.headers.common["Content-Type"]="application/json",V.a.defaults.headers.common["Access-Control-Allow-Origin"]="*",V.a.interceptors.request.use((function(t){var e=J.getters["getAccessToken"]?J.getters["getAccessToken"]:localStorage.getItem("jwt");return console.log(e),t.headers["Authorization"]="Bearer ".concat(e),console.log("config",t.headers),t}));var Q={"Content-Type":"application/json"},Y={request:function(t,e){var a=arguments,s=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,i,o,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:null,i=a.length>3&&void 0!==a[3]?a[3]:null,t=t.toLowerCase(),e.startsWith("http")||(e=s.buildUrl(e)),o={method:t,url:e,data:r,headers:i},n.prev=5,n.next=8,V()(o);case 8:return c=n.sent,n.abrupt("return",c.data);case 12:if(n.prev=12,n.t0=n["catch"](5),l={statusCode:q.BAD_REQUEST},!n.t0.response){n.next=18;break}return l.error=n.t0.response.data.error,n.abrupt("return",l);case 18:return l.error="An unknwon error occurred",n.abrupt("return",l);case 20:case"end":return n.stop()}}),n,null,[[5,12]])})))()},buildUrl:function(t){return t.startsWith("http")?t:(t.startsWith("/")&&(t=t.substr(1,t.length)),t.endsWith("/")&&(t=t.substr(0,t.length-1)),"".concat("https://sdprin-casting-agency-backend.herokuapp.com/","/").concat(t))},get:function(t,e){return this.request("GET",t,null,e||Q)},post:function(t,e,a){return this.request("POST",t,e,a||Q)},put:function(t,e,a){return this.request("PUT",t,e,a||Q)},patch:function(t,e,a){return this.request("PATCH",t,e,a||Q)},delete:function(t,e){return this.request("DELETE",t,null,e||Q)}},H={name:"Dashboard",data:function(){return{movieData:null,movieTotal:null,actorData:null,actorTotal:null,isLoading:{actors:!0,movies:!0},error:{actors:null,movies:null},unauthorised:!1}},components:{BasePage:S,LoadingAnimation:A},created:function(){this.loadActors(),this.loadMovies()},watch:{authLoading:function(t){t?this.$router.push({name:"app_login"}):(this.loadMovies(),this.loadActors())}},computed:{authLoading:function(){return this.$auth.loading},permissions:function(){return this.$store.getters["getPermissions"]}},methods:{loadActors:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading.actors=!0,!t.permissions.includes("list:actors")){e.next=8;break}return e.next=4,N.getInstance().actors().getAll(1,"by_castings");case 4:a=e.sent,a.success?(t.actorData=a.data,t.actorTotal=a.total):t.error.actors="Failed to load actors",e.next=9;break;case 8:t.unauthorised=!0;case 9:t.isLoading.actors=!1;case 10:case"end":return e.stop()}}),e)})))()},loadMovies:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading.movies=!0,!t.permissions.includes("list:movies")){e.next=9;break}return console.log("can fetch movies"),e.next=5,N.getInstance().movies().getAll(1,"by_date");case 5:a=e.sent,a.success?(t.movieData=a.data,t.movieTotal=a.total):t.error.movies="Failed to load movies",e.next=10;break;case 9:t.unauthorised=!0;case 10:t.isLoading.movies=!1;case 11:case"end":return e.stop()}}),e)})))()}}},Z=H,K=Object(c["a"])(Z,L,P,!1,null,null,null),X=K.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasePage",{scopedSlots:t._u([{key:"main",fn:function(){return[a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v("Profile")]),a("button",{staticClass:"btn btn-outline-secondary ms-auto",on:{click:function(e){return t.logout()}}},[a("span",[t._v("Sign out")]),a("i",{staticClass:"bi bi-box-arrow-right ms-2"})])]),a("div",{staticClass:"mt-2 px-2 py-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col col-auto me-2"},[a("img",{staticClass:"rounded-3",staticStyle:{"max-width":"150px"},attrs:{src:t.user.picture}})]),a("div",{staticClass:"col col-4"},[a("label",{staticClass:"form-label"},[t._v("Name")]),a("BFormInput",{attrs:{disabled:""},model:{value:t.user.nickname,callback:function(e){t.$set(t.user,"nickname",e)},expression:"user.nickname"}})],1),a("div",{staticClass:"col col-4"},[a("label",{staticClass:"form-label"},[t._v("Email / Username")]),a("BFormInput",{attrs:{disabled:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("code",{staticStyle:{width:"100%","min-height":"300px"}},[t._v(" "+t._s(t.jwt.value)+" ")])])])]),a("div",{staticClass:"mt-3 border-top pt-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("h4",{staticClass:"mb-3"},[t._v("Permissions")]),a("ul",{staticClass:"p-0 m-0",staticStyle:{"list-style":"none"}},[t._l(t.permissions,(function(e,s){return[a("li",{key:s,staticClass:"badge bg-secondary me-1 fs-6 fw-normal"},[t._v(" "+t._s(e)+" ")])]}))],2)])])])]},proxy:!0}])},[t.isSigningOut?a("div",{staticClass:"position-fixed bg-light w-100 h-100 d-flex align-items-center justify-content-center",staticStyle:{"z-index":"99999",top:"0",left:"0"}},[a("div",{staticClass:"card p-4 shadow-sm"},[a("div",{staticClass:"card-body d-flex align-items-center justify-content-center flex-column"},[a("div",[a("span",{staticClass:"spinner-border me-4",staticStyle:{width:"1.2rem",height:"1.2rem"},attrs:{role:"status"}}),a("span",[t._v("Signing Out...")])])])])]):t._e()])},et=[],at={name:"ActorWrapper",data:function(){return{isSigningOut:!1}},components:{BasePage:S},computed:{user:function(){return this.$auth.user},jwt:function(){return JSON.parse(window.localStorage.getItem("jwt"))},permissions:function(){return this.$store.getters["getPermissions"]}},methods:{logout:function(){this.isSigningOut=!0,this.$auth.logout({returnTo:window.location.origin})}}},st=at,nt=Object(c["a"])(st,tt,et,!1,null,null,null),rt=nt.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"h-100 w-100 position-absolute bg-light",staticStyle:{left:"0",top:"0"}},[a("div",{staticClass:"h-100 w-100 d-flex justify-content-center align-items-center"},[a("div",{staticClass:"card p-4 shadow-sm"},[a("div",{staticClass:"card-body d-flex align-items-center justify-content-center flex-column"},[t.$auth.loading?t._e():a("h2",{staticClass:"fs-3"},[t._v("Casting Agency Login")]),t.$auth.loading?t._e():a("div",[t.$auth.isAuthenticated?t._e():a("p",{staticClass:"text-secondary text-center",staticStyle:{"font-size":"13px"}},[t._v(" Please click the button below to login ")]),t.$auth.isAuthenticated?a("p",{staticClass:"text-secondary text-center",staticStyle:{"font-size":"13px"}},[t._v(" You are logged in! "),a("br"),t._v(" Click the button below to logout. ")]):t._e()]),a("div",[a("div",{staticClass:"w-100 d-flex justify-content-center"},[t.$auth.isAuthenticated||t.$auth.loading?t._e():a("button",{staticClass:"btn btn-lg btn-primary mt-4",attrs:{disabled:t.$auth.loading},on:{click:t.login}},[a("span",[t._v("Log in")])]),t.$auth.loading?a("span",[t._v(" Loading "),a("span",{staticClass:"spinner-border ms-2",staticStyle:{width:"1.2rem",height:"1.2rem"},attrs:{role:"status"}})]):t._e(),t.$auth.isAuthenticated?a("button",{staticClass:"btn btn-lg btn-primary mt-4",on:{click:t.logout}},[t._v(" Log out ")]):t._e()]),t.$auth.isAuthenticated?a("div",{staticClass:"w-100 d-flex justify-content-center"},[a("button",{staticClass:"btn btn-sm btn-outline-secondary mt-4",attrs:{disabled:t.accessToken},on:{click:t.getToken}},[t.accessToken?a("span",[t._v("Token Saved!")]):a("span",[t._v("Get Token")])]),t.accessToken?a("router-link",{staticClass:"btn-primary btn mt-2",attrs:{to:{name:"app_dashboard"}}},[t._v("App Dashboard ")]):t._e()],1):t._e()]),t.$auth.error?a("div",[t._v(" "+t._s(t.$auth.error)+" ")]):t._e()])])])])},ot=[],ct=(a("e9c4"),{name:"Login",data:function(){return{accessToken:null}},computed:{isAuthenticated:function(){return this.$auth.isAuthenticated},error:function(){return this.$auth.error}},watch:{isAuthenticated:{handler:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=3;break}return a.next=3,e.handleRefresh();case 3:case"end":return a.stop()}}),a)})))()}},error:{handler:function(t){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=3;break}return a.next=3,e.$auth.logout();case 3:case"end":return a.stop()}}),a)})))()},immediate:!0}},created:function(){return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},methods:{handleRefresh:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getToken();case 2:return e.next=4,t.handleRedirect();case 4:case"end":return e.stop()}}),e)})))()},handleRedirect:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.$store.getters["getReloadedPath"],!a||"/"===a){e.next=6;break}return e.next=4,t.$router.push({path:a});case 4:e.next=8;break;case 6:return e.next=8,t.$router.push({name:"app_dashboard"});case 8:return e.next=10,t.$store.dispatch("setIsReloaded",!1);case 10:return e.next=12,t.$store.dispatch("setReloadedPath",null);case 12:case"end":return e.stop()}}),e)})))()},login:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$auth.loginWithRedirect();case 2:return e.next=4,t.getToken();case 4:return e.next=6,t.handleRedirect();case 6:case"end":return e.stop()}}),e)})))()},getToken:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!localStorage.getItem("jwt")||!localStorage.getItem("permissions")){e.next=4;break}a=localStorage.getItem("jwt"),e.next=9;break;case 4:return e.next=6,t.$auth.getTokenSilently();case 6:a=e.sent,s={value:a,expiry:Date.now+864e5},localStorage.setItem("jwt",JSON.stringify(s));case 9:return n=t.$jwtDec.decode(a).permissions,e.next=12,t.$store.dispatch("setAccessToken",a);case 12:return e.next=14,t.$store.dispatch("setAuthPermissions",n);case 14:return t.accessToken=a,e.next=17,t.$router.push({name:"app_dashboard"});case 17:case"end":return e.stop()}}),e)})))()},logout:function(){this.$auth.logout({returnTo:window.location.origin})}}}),lt=ct,ut=Object(c["a"])(lt,it,ot,!1,null,null,null),dt=ut.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v("Movies")]),t.permissions.includes("add:movie")?a("router-link",{staticClass:"btn btn-primary ms-auto",attrs:{tag:"button",to:{name:"app_movies_new"}}},[a("i",{staticClass:"bi bi-plus-circle me-1"}),a("span",[t._v("Add Movie")])]):t._e()],1),a("div",{staticClass:"mt-2"},[t.isLoading?[a("LoadingAnimation")]:t.unauthorised?[a("p",[t._v("You do not have permission to view Movies")])]:t.error?[a("p",[t._v(t._s(t.error))])]:t.movieData.length?[a("div",{staticClass:"row d-flex px-2 py-3 movie-row align-items-stretch"},[t._l(t.movieData,(function(e){return[a("router-link",{key:e.id,staticClass:"movie-card text-decoration-none text-black p-0",attrs:{to:{name:"app_movies_view",params:{id:e.id}}}},[a("div",{staticClass:"card shadow-sm p-0"},[a("div",{staticClass:"card-body movie-card-picture",style:{background:e.image?"url("+e.image+")":"url('https://via.placeholder.com/300x250')"}},[a("span",{staticClass:"movie-card-link"},[t.permissions.includes("edit:movie")?a("router-link",{key:e.id,staticClass:"btn-secondary btn btn-sm py-1 px-3",attrs:{to:{name:"app_movies_edit",params:{id:e.id}}}},[t._v(" Edit ")]):t._e()],1),a("span",{staticClass:"movie-card-link center"},[a("button",{staticClass:"btn btn-light"},[t._v("View")])])]),a("div",{staticClass:"card-footer"},[a("div",{staticClass:"d-flex"},[a("h4",{staticClass:"fw-bold movie-title fs-5 text-black text-decoration-none"},[t._v(" "+t._s(e.title)+" ")]),a("p",{staticClass:"ms-auto text-secondary"},[a("i",{staticClass:"bi bi-people-fill"}),t._v(" "+t._s(e.cast?e.cast.length:0)+" ")])]),a("div",[a("span",{staticClass:"text-secondary fst-italic"},[t._v(" Releasing: "),a("span",[t._v(t._s(e.release_date))])])])])])])]}))],2),a("div",[a("nav",{staticClass:"mt-4",attrs:{"aria-label":"Page Navigation"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",class:{disabled:t.page<=1},attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return t.setPage(t.page-1)}}},[t._m(0)])]),t._l(t.pageNumbers,(function(e,s){return[a("li",{key:s,staticClass:"page-item"},[a("a",{staticClass:"page-link",class:{active:t.page===e},attrs:{href:"#"},on:{click:function(a){return t.setPage(e)}}},[t._v(" "+t._s(e)+" ")])])]})),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",class:{disabled:t.page>=t.pages},attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.setPage(t.page+1)}}},[t._m(1)])])],2)])])]:[a("p",[t._v("Could not find any movies.")])]],2)])},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"bi bi-arrow-left"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"bi bi-arrow-right"})])}],ht={name:"MovieList",data:function(){return{movieData:null,isLoading:!0,error:null,unauthorised:!1,pages:null,page:1,movieTotal:null}},components:{LoadingAnimation:A},watch:{authLoading:function(t){t?this.$router.push({name:"app_login"}):this.loadMovies()},page:function(){console.log("page changed, load movies"),this.loadMovies()}},computed:{authLoading:function(){return this.$auth.loading},permissions:function(){return this.$store.getters["getPermissions"]},pageNumbers:function(){for(var t=[],e=0,a=0;a<this.pages;a++)e++,t.push(e),console.log(t);return t}},created:function(){this.authLoading||(console.log("user",this.user),this.loadMovies())},methods:{setPage:function(t){this.page=t,console.log("page",t)},loadMovies:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLoading=!0,!t.permissions.includes("list:movies")){e.next=8;break}return e.next=4,N.getInstance().movies().getAll(t.page);case 4:a=e.sent,a.success?(t.movieData=a.data,t.pages=a.pages):t.error="Failed to load actors",e.next=9;break;case 8:t.unauthorised=!0;case 9:t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})))()}}},vt=ht,gt=Object(c["a"])(vt,pt,mt,!1,null,null,null),ft=gt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?[a("LoadingAnimation")]:t.error?[a("div",{staticClass:"alert alert-warning"},[t._v(" "+t._s(t.error)+" ")])]:[a("div",[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary me-4",attrs:{to:{name:"app_movies_list"}}},[a("i",{staticClass:"bi-arrow-left"}),t._v(" Back to Movies ")])],1),a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v(t._s(t.pageTitle))])]),a("div",{staticClass:"mt-2"},[a("BForm",[a("div",{staticClass:"row"},[a("div",{staticClass:"col col-4"},[a("label",{staticClass:"form-label"},[t._v("Movie Title")]),a("BFormInput",{model:{value:t.movieData.title,callback:function(e){t.$set(t.movieData,"title",e)},expression:"movieData.title"}})],1),a("div",{staticClass:"col col-3"},[a("label",{staticClass:"form-label"},[t._v("Movie Release Date")]),a("BFormDatepicker",{staticClass:"form-control",model:{value:t.movieData.release_date,callback:function(e){t.$set(t.movieData,"release_date",e)},expression:"movieData.release_date"}})],1)]),a("div",{staticClass:"row mt-3 mb-4"},[a("div",{staticClass:"col col-4"},[a("label",{staticClass:"form-label"},[t._v("Movie Cast")]),a("Multiselect",{staticStyle:{"min-width":"350px"},attrs:{placeholder:"Select cast members",options:t.actors,multiple:!0,searchable:!0,"track-by":"id",label:"name"},on:{select:t.addActor,remove:t.removeActor},model:{value:t.selectedActors,callback:function(e){t.selectedActors=e},expression:"selectedActors"}})],1),a("div",{staticClass:"col col-4"},[a("label",{staticClass:"form-label"},[t._v("Movie Poster Link")]),a("BFormInput",{attrs:{placeholder:"http://..."},model:{value:t.movieData.image,callback:function(e){t.$set(t.movieData,"image",e)},expression:"movieData.image"}})],1)]),a("button",{staticClass:"btn btn-primary mt-3",on:{click:function(e){return e.preventDefault(),t.saveMovie.apply(null,arguments)}}},[a("span",[t._v(t._s(t.submitText))])]),a("button",{staticClass:"btn btn-outline-secondary mt-3 ms-3",on:{click:function(e){return e.preventDefault(),t.handleCancelClick.apply(null,arguments)}}},[t._v(" Cancel ")])])],1)]],2)},_t=[],Ct=(a("b0c0"),a("d3b7"),a("159b"),a("4de4"),a("11de")),wt=a("4797"),xt=a("c2f1"),kt=a("8e5f"),yt=a.n(kt),Rt={name:"MovieSingle",data:function(){return{movieData:null,actors:[],isLoading:!0,error:null,selectedActors:[]}},created:function(){this.$route.name.startsWith("app_movies_new")&&(this.isLoading=!1,this.movieData={title:null,release_date:null,image:null,actors:[]}),this.initialiseMovieForm()},components:{BForm:Ct["a"],BFormInput:wt["a"],BFormDatepicker:xt["a"],Multiselect:yt.a,LoadingAnimation:A},computed:{pageTitle:function(){return this.isLoading?"":this.$route.params.id&&!this.isLoading&&this.movieData?"Edit "+this.movieData.title:"New Movie"},submitText:function(){var t;switch(this.$route.name){case"app_movies_new":t=this.saving?"Adding Movie":"Save Movie";break;case"app_movies_edit":t=this.saving?"Updating Movie":"Update Movie";break}return t}},methods:{handleCancelClick:function(){history.length?history.go(-1):this.$route.params.id?this.$router.push({name:"app_movies_view",params:{id:this.movieData.id}}):this.$router.push({name:"app_movies_list"})},initialiseMovieForm:function(){this.isLoading=!0,this.$route.name.startsWith("app_movies_edit")&&this.loadMovie(),this.loadActors(),this.isLoading=!1},loadActors:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.getInstance().actors().getAll(-1);case 2:a=e.sent,a.success?t.actors=a.data:t.error="Failed to load actors";case 4:case"end":return e.stop()}}),e)})))()},loadMovie:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("fetching movie"),e.next=3,N.getInstance().movies().get(t.$route.params.id);case 3:a=e.sent,a.success?(s=a.data,t.selectedActors=s.cast,s.actors=[],s.cast.forEach((function(t){s.actors.push(t.id)})),s.cast=[],t.movieData=s):t.error="Failed to load movie";case 5:case"end":return e.stop()}}),e)})))()},saveMovie:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.saving=!0,!t.$route.params.id){e.next=7;break}return e.next=4,N.getInstance().movies().update(t.$route.params.id,t.movieData);case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,N.getInstance().movies().create(t.movieData);case 9:a=e.sent;case 10:if(!a.success){e.next=16;break}return e.next=13,t.$router.push({name:"app_movies_list"});case 13:t.error=null,e.next=17;break;case 16:t.$route.params.id?t.error="Error when updating actor":t.error="Error when saving actor";case 17:setTimeout((function(){t.saving=!1}),2e3);case 18:case"end":return e.stop()}}),e)})))()},addActor:function(t){console.log("selection",t.id),this.movieData.actors.push(t.id)},removeActor:function(t){console.log("remove",t.id),this.movieData.actors=this.movieData.actors.filter((function(e){return e!==t.id}))}}},Dt=Rt,At=Object(c["a"])(Dt,bt,_t,!1,null,null,null),$t=At.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasePage",{scopedSlots:t._u([{key:"main",fn:function(){return[a("router-view")]},proxy:!0}])})},jt=[],St={name:"MovieWrapper",components:{BasePage:S}},Lt=St,Pt=Object(c["a"])(Lt,Ot,jt,!1,null,null,null),Tt=Pt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?[a("LoadingAnimation")]:t.error?[t.error?a("div",{staticClass:"alert alert-warning"},[t._v(" "+t._s(t.error)+" ")]):t._e()]:[a("div",[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary me-4",attrs:{to:{name:"app_movies_list"}}},[a("i",{staticClass:"bi-arrow-left"}),t._v(" Back ")])],1),a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v(t._s(t.movieData.title))]),t.permissions.includes("edit:movie")?a("router-link",{staticClass:"btn btn-secondary ms-auto me-2",attrs:{to:{name:"app_movies_edit",params:{id:t.movieData.id}}}},[t._v("Edit movie")]):t._e(),t.permissions.includes("delete:movie")?a("button",{staticClass:"btn btn-outline-danger",on:{click:t.handleDeleteClick}},[t._v(" Delete ")]):t._e()],1),a("div",{staticClass:"mt-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto col-auto"},[a("img",{staticClass:"rounded shadow-sm",staticStyle:{"max-width":"250px",width:"100%"},attrs:{src:t.movieData.image?t.movieData.image:"https://via.placeholder.com/180x220",alt:""}})]),a("div",{staticClass:"col-auto p-2"},[a("p",{staticClass:"fw-bold mb-1"},[t._v("Cast Size:")]),a("p",[t._v(t._s(t.movieData.cast.length))]),a("p",{staticClass:"fw-bold mb-1"},[t._v("Release Date:")]),a("p",[t._v(t._s(t.movieData.release_date))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col col-12"},[a("h5",{staticClass:"mt-5 mb-3"},[t._v("Movie Castings")]),t.movieData.cast&&t.movieData.cast.length?[a("table",{staticClass:"table"},[t._m(0),a("tbody",{staticClass:"border-1 table-light"},[t._l(t.movieData.cast,(function(e){return[a("tr",{key:e.id},[a("td",{staticClass:"align-middle"},[e.image?[a("img",{staticClass:"rounded-circle",staticStyle:{"object-fit":"cover",width:"40px",height:"40px"},attrs:{src:e.image,alt:e.name}})]:[a("i",{staticClass:"bi bi-person-circle fs-4 ms-2"})]],2),a("td",{staticClass:"align-middle"},[t._v(t._s(e.name))]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.age))]),a("td",{staticClass:"align-middle"},[a("span",{staticClass:"badge bg-lighter-grey text-grey"},[t._v(" "+t._s(e.gender.split("")[0].toUpperCase())+" ")])]),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:{name:"app_actors_view",params:{id:e.id}}}},[t._v(" View Actor ")])],1)])]}))],2)])]:[a("p",{staticClass:"text-secondary"},[t._v(" This movie currently has no actors cast for it. ")])]],2)])])]],2)},It=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-secondary"},[a("th",[t._v("#")]),a("th",[t._v("Actor")]),a("th",[t._v("Age")]),a("th",[t._v("Gender")]),a("th")])])}],Mt={name:"MovieSingle",components:{LoadingAnimation:A},data:function(){return{movieData:null,isLoading:!0,error:null}},created:function(){this.loadMovie()},computed:{permissions:function(){return this.$store.getters["getPermissions"]}},methods:{handleDeleteClick:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.getInstance().movies().delete(t.$route.params.id);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,t.$router.push({name:"app_movies_list"});case 6:e.next=9;break;case 8:t.error="Failed to delete movie";case 9:case"end":return e.stop()}}),e)})))()},loadMovie:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,N.getInstance().movies().get(t.$route.params.id);case 3:a=e.sent,a.success?t.movieData=a.data:t.error="Failed to load movie",t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},Ut=Mt,Bt=Object(c["a"])(Ut,Et,It,!1,null,null,null),Ft=Bt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BasePage",{scopedSlots:t._u([{key:"main",fn:function(){return[a("router-view")]},proxy:!0}])})},Wt=[],Vt={name:"ActorWrapper",components:{BasePage:S}},qt=Vt,zt=Object(c["a"])(qt,Nt,Wt,!1,null,null,null),Gt=zt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v("Actors")]),t.permissions.includes("add:actor")?a("router-link",{staticClass:"btn btn-primary ms-auto",attrs:{tag:"button",to:{name:"app_actors_new"}}},[a("i",{staticClass:"bi bi-plus-circle me-1"}),a("span",[t._v("Add Actor")])]):t._e()],1),a("div",{staticClass:"mt-2"},[t.isLoading?[a("LoadingAnimation")]:t.error?[a("p",[t._v(t._s(t.error))])]:t.actorData?t.actorData.length?[a("table",{staticClass:"table table-hover mt-5"},[t._m(0),a("tbody",{staticClass:"border table-light rounded-2 overflow-hidden"},[t._l(t.actorData,(function(e){return[a("router-link",{key:e.id,staticClass:"hoverable",attrs:{tag:"tr",to:{name:"app_actors_view",params:{id:e.id}}}},[a("td",{staticClass:"align-middle"},[e.image?[a("img",{staticClass:"rounded-circle",staticStyle:{"object-fit":"cover",width:"40px",height:"40px"},attrs:{src:e.image,alt:e.name}})]:[a("i",{staticClass:"bi bi-person-circle fs-4 ms-2"})]],2),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"text-decoration-none text-black fw-bold",attrs:{to:{name:"app_actors_view",params:{id:e.id}}}},[t._v(t._s(e.name))])],1),a("td",{staticClass:"align-middle"},[t._v(t._s(e.age))]),a("td",{staticClass:"align-middle"},[a("span",{staticClass:"badge bg-lighter-grey text-grey"},[t._v(t._s(e.gender.split("")[0].toUpperCase()))])]),a("td",{staticClass:"text-center align-middle"},[t._v(" "+t._s(e.castings?e.castings.length:"-")+" ")]),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary me-2",attrs:{to:{name:"app_actors_view",params:{id:e.id}}}},[t._v("View")]),t.permissions.includes("edit:actor")?a("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:{name:"app_actors_edit",params:{id:e.id}}}},[t._v("Edit")]):t._e()],1)])]}))],2)]),a("div",[a("nav",{staticClass:"mt-4",attrs:{"aria-label":"Page Navigation"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",class:{disabled:t.page<=1},attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return t.setPage(t.page-1)}}},[t._m(1)])]),t._l(t.pageNumbers,(function(e,s){return[a("li",{key:s,staticClass:"page-item"},[a("a",{staticClass:"page-link",class:{active:t.page===e},attrs:{href:"#"},on:{click:function(a){return t.setPage(e)}}},[t._v(" "+t._s(e)+" ")])])]})),a("li",{staticClass:"page-item"},[a("a",{staticClass:"page-link",class:{disabled:t.page>=t.pages},attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.setPage(t.page+1)}}},[t._m(2)])])],2)])])]:[a("p",[t._v("Could not find any actors.")])]:[t._v(" There are currently no actors in the system ")]],2)])},Qt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"bg-transparent"},[a("tr",[a("th",{attrs:{scope:"col"}}),a("th",{attrs:{scope:"col"}},[t._v("Name")]),a("th",{attrs:{scope:"col"}},[t._v("Age")]),a("th",{attrs:{scope:"col"}},[t._v("Gender")]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v("Castings")]),a("th",{attrs:{scope:"col"}},[a("i",{staticClass:"bi bi-sliders"})])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"bi bi-arrow-left"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"bi bi-arrow-right"})])}],Yt={name:"MovieList",data:function(){return{actorData:null,isLoading:!0,error:null,pages:null,saving:!1,page:1}},components:{LoadingAnimation:A},created:function(){this.loadActors()},watch:{authLoading:function(t){t?this.$router.push({name:"app_login"}):this.loadActors()},page:function(){console.log("page changed, load movies"),this.loadActors()}},computed:{pageNumbers:function(){for(var t=[],e=0,a=0;a<this.pages;a++)e++,t.push(e),console.log(t);return t},permissions:function(){return this.$store.getters["getPermissions"]}},methods:{setPage:function(t){this.page=t,console.log("page",t)},loadActors:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,N.getInstance().actors().getAll(t.page);case 3:a=e.sent,a.success?(t.actorData=a.data,t.pages=a.pages):t.error="Failed to load actors",t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}}},Ht=Yt,Zt=Object(c["a"])(Ht,Jt,Qt,!1,null,null,null),Kt=Zt.exports,Xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary me-4",attrs:{to:{name:"app_actors_list"}}},[a("i",{staticClass:"bi-arrow-left"}),t._v(" Back to Actors ")])],1),a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v(t._s(t.pageTitle))])]),a("div",{staticClass:"mt-2"},[t.isLoading?[a("LoadingAnimation")]:t.error?[a("div",{staticClass:"alert alert-warning"},[t._v(" "+t._s(t.error)+" ")])]:[a("BForm",[a("div",{staticClass:"row"},[a("div",{staticClass:"col col-auto"},[a("label",{staticClass:"form-label"},[t._v("Full Name")]),a("BFormInput",{model:{value:t.actorData.name,callback:function(e){t.$set(t.actorData,"name",e)},expression:"actorData.name"}})],1),a("div",{staticClass:"col col-auto"},[a("label",{staticClass:"form-label"},[t._v("Age")]),a("BFormInput",{attrs:{type:"number"},model:{value:t.actorData.age,callback:function(e){t.$set(t.actorData,"age",e)},expression:"actorData.age"}})],1),a("div",{staticClass:"col col-auto"},[a("label",{staticClass:"form-label"},[t._v("Select Gender")]),a("BFormSelect",{staticClass:"form-select",attrs:{options:t.genders},model:{value:t.actorData.gender,callback:function(e){t.$set(t.actorData,"gender",e)},expression:"actorData.gender"}})],1),a("div",{staticClass:"col col-auto"},[a("label",{staticClass:"form-label"},[t._v("Profile Picture Link")]),a("BFormInput",{attrs:{placeholder:"http://....",type:"text"},model:{value:t.actorData.image,callback:function(e){t.$set(t.actorData,"image",e)},expression:"actorData.image"}})],1)]),a("button",{staticClass:"btn btn-primary mt-3",on:{click:function(e){return e.preventDefault(),t.saveActor.apply(null,arguments)}}},[a("span",[t._v("Save Actor")])]),a("button",{staticClass:"btn btn-outline-secondary mt-3 ms-3",on:{click:function(e){return e.preventDefault(),t.handleCancelClick.apply(null,arguments)}}},[t._v(" Cancel ")])])]],2)])},te=[],ee=a("8361"),ae={name:"ActorSingle",data:function(){return{actorData:null,genders:z,isLoading:!0,error:null}},created:function(){this.$route.name.startsWith("app_actors_new")?(this.isLoading=!1,this.actorData={name:null,age:null,gender:null,image:null}):this.loadActor()},components:{BForm:Ct["a"],BFormInput:wt["a"],BFormSelect:ee["a"],LoadingAnimation:A},computed:{pageTitle:function(){return this.isLoading?"":this.$route.params.id&&!this.isLoading&&this.actorData?"Edit "+this.actorData.name:"New Movie"}},methods:{handleCancelClick:function(){history.length?history.go(-1):this.$route.params.id?this.$router.push({name:"app_actors_view",params:{id:this.actorData.id}}):this.$router.push({name:"app_actors_list"})},loadActor:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,N.getInstance().actors().get(t.$route.params.id);case 3:a=e.sent,a.success?t.actorData=a.data:t.error="Failed to load actor",t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},saveActor:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.saving=!0,!t.$route.params.id){e.next=7;break}return e.next=4,N.getInstance().actors().update(t.$route.params.id,t.actorData);case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,N.getInstance().actors().create(t.actorData);case 9:a=e.sent;case 10:if(!a.success){e.next=16;break}return e.next=13,t.$router.push({name:"app_actors_view",params:{id:a.id?a.id:t.actorData.id}});case 13:t.error=null,e.next=17;break;case 16:t.$route.params.id?t.error="Error when updating actor":t.error="Error when saving actor";case 17:setTimeout((function(){t.saving=!1}),500);case 18:case"end":return e.stop()}}),e)})))()}}},se=ae,ne=Object(c["a"])(se,Xt,te,!1,null,null,null),re=ne.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isLoading?[a("LoadingAnimation")]:t.error?[t.error?a("div",{staticClass:"alert alert-warning"},[t._v(" "+t._s(t.error)+" ")]):t._e()]:[a("div",[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary me-4",attrs:{to:{name:"app_actors_list"}}},[a("i",{staticClass:"bi-arrow-left"}),t._v(" Back ")])],1),a("div",{staticClass:"d-flex align-items-center py-4 border-bottom"},[a("h3",{staticClass:"mb-0 me-4"},[t._v(t._s(t.actorData.name))]),t.permissions.includes("edit:actor")?a("router-link",{staticClass:"btn btn-secondary ms-auto me-2",attrs:{to:{name:"app_actors_edit",params:{id:t.actorData.id}}}},[t._v("Edit Actor")]):t._e(),t.permissions.includes("delete:actor")?a("button",{staticClass:"btn btn-outline-danger",on:{click:t.handleDeleteClick}},[t._v(" Delete ")]):t._e()],1),a("div",{staticClass:"mt-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto col-auto"},[t.actorData.image?[a("img",{staticClass:"rounded shadow-sm",staticStyle:{"max-width":"250px"},attrs:{src:t.actorData.image,alt:""}})]:[a("img",{staticClass:"rounded shadow-sm",attrs:{src:"https://via.placeholder.com/150x150",alt:""}})]],2),a("div",{staticClass:"col-auto p-2"},[a("p",{staticClass:"fw-bold mb-1"},[t._v("Age:")]),a("p",[t._v(t._s(t.actorData.age))]),a("p",{staticClass:"fw-bold mb-1"},[t._v("Gender:")]),a("p",[t._v(t._s(t.actorData.gender))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col col-12"},[a("h5",{staticClass:"mt-5 mb-3"},[t._v("Actor movie castings")]),t.actorData.castings&&t.actorData.castings.length?[a("table",{staticClass:"table"},[t._m(0),a("tbody",{staticClass:"border-1 table-light"},[t._l(t.actorData.castings,(function(e){return[a("tr",{key:e.id},[t._m(1,!0),a("td",{staticClass:"align-middle"},[t._v(t._s(e.title))]),a("td",{staticClass:"align-middle"},[t._v(t._s(e.release_date))]),a("td",{staticClass:"align-middle"},[a("router-link",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{to:{name:"app_movies_view",params:{id:e.id}}}},[t._v(" View Movie ")])],1)])]}))],2)])]:[a("p",{staticClass:"text-secondary"},[t._v(" This actor is currently not cast in any movies. ")])]],2)])])]],2)},oe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"text-secondary"},[a("th",[t._v("#")]),a("th",[t._v("Movie")]),a("th",[t._v("Release Date")]),a("th")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{staticClass:"align-middle"},[a("i",{staticClass:"bi-film"})])}],ce=(a("ac1f"),a("1276"),{name:"ActorSingle",data:function(){return{actorData:null,isLoading:!0,error:null}},components:{LoadingAnimation:A},created:function(){this.$route.name.startsWith("app_actors_new")?(this.isLoading=!1,this.actorData={name:null,age:null,gender:null}):this.loadActor()},computed:{firstName:function(){var t=this.actorData.name.split(" ");return t[0]},permissions:function(){return this.$store.getters["getPermissions"]}},methods:{handleDeleteClick:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.getInstance().actors().delete(t.$route.params.id);case 2:if(a=e.sent,!a.success){e.next=8;break}return e.next=6,t.$router.push({name:"app_actors_list"});case 6:e.next=9;break;case 8:t.error="Failed to delete actor";case 9:case"end":return e.stop()}}),e)})))()},loadActor:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,N.getInstance().actors().get(t.$route.params.id);case 3:a=e.sent,a.success?t.actorData=a.data:t.error="Failed to load actor",t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}}}),le=ce,ue=Object(c["a"])(le,ie,oe,!1,null,null,null),de=ue.exports;s["default"].use(p["a"]);var pe=[{path:"/",name:"app_login",component:dt,meta:{pageTitle:"Dashboard"}},{path:"/login-results",name:"app_login_results",component:dt,meta:{pageTitle:"Dashboard"}},{path:"/dashboard",name:"app_dashboard",component:X,meta:{pageTitle:"Dashboard"}},{path:"/movies",name:"app_movies",component:Tt,children:[{path:"",name:"app_movies_list",component:ft},{path:":id/view",name:"app_movies_view",component:Ft},{path:"new",name:"app_movies_new",component:$t},{path:":id/edit",name:"app_movies_edit",component:$t}]},{path:"/actors",name:"app_actors",component:Gt,children:[{path:"",name:"app_actors_list",component:Kt},{path:":id/view",name:"app_actors_view",component:de},{path:"new",name:"app_actors_new",component:re},{path:":id/edit",name:"app_actors_edit",component:re}]},{path:"/profile",name:"app_profile",component:rt}],me=new p["a"]({mode:"history",routes:pe});me.beforeEach(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(e,a,s){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("getIsReloaded?",!J.getters["getIsReloaded"]),J.getters["getIsReloaded"]||J.getters["getAccessToken"]){t.next=8;break}return console.log("redirect to app login router-link"),t.next=5,J.dispatch("setReloadedPath",e.path);case 5:return t.next=7,J.dispatch("setIsReloaded",!0);case 7:s({name:"app_login"});case 8:s();case 9:case"end":return t.stop()}}),t)})));return function(e,a,s){return t.apply(this,arguments)}}());var he,ve=me,ge=a("5f5b"),fe=a("b1e0"),be=a("48ac"),_e=a.n(be),Ce=a("8160"),we=a("5530"),xe=a("15fd"),ke=(a("841c"),a("9767")),ye=["onRedirectCallback","redirectUri"],Re=function(t){var e=t.onRedirectCallback,a=void 0===e?function(){return window.history.replaceState({},document.title,window.location.pathname)}:e,n=t.redirectUri,r=void 0===n?window.location.origin:n,i=Object(xe["a"])(t,ye);return he||(he=new s["default"]({data:function(){return{loading:!0,isAuthenticated:!1,user:{},auth0Client:null,popupOpen:!1,error:null}},methods:{loginWithPopup:function(t,e){var a=this;return Object(d["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a.popupOpen=!0,s.prev=1,s.next=4,a.auth0Client.loginWithPopup(t,e);case 4:return s.next=6,a.auth0Client.getUser();case 6:return a.user=s.sent,s.next=9,a.auth0Client.isAuthenticated();case 9:a.isAuthenticated=s.sent,a.error=null,s.next=17;break;case 13:s.prev=13,s.t0=s["catch"](1),a.error=s.t0,console.error(s.t0);case 17:return s.prev=17,a.popupOpen=!1,s.finish(17);case 20:return s.next=22,a.auth0Client.getUser();case 22:a.user=s.sent,a.isAuthenticated=!0;case 24:case"end":return s.stop()}}),s,null,[[1,13,17,20]])})))()},handleRedirectCallback:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.prev=1,e.next=4,t.auth0Client.handleRedirectCallback();case 4:return e.next=6,t.auth0Client.getUser();case 6:t.user=e.sent,t.isAuthenticated=!0,t.error=null,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),t.error=e.t0;case 14:return e.prev=14,t.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))()},loginWithRedirect:function(t){return this.auth0Client.loginWithRedirect(t)},getIdTokenClaims:function(t){return this.auth0Client.getIdTokenClaims(t)},getTokenSilently:function(t){return this.auth0Client.getTokenSilently(t)},getTokenWithPopup:function(t){return this.auth0Client.getTokenWithPopup(t)},logout:function(t){return this.auth0Client.logout(t)}},created:function(){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(ke["a"])(Object(we["a"])(Object(we["a"])({},i),{},{domain:i.domain,client_id:i.clientId,audience:i.audience,redirect_uri:r}));case 2:if(t.auth0Client=e.sent,e.prev=3,!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=11;break}return e.next=7,t.auth0Client.handleRedirectCallback();case 7:s=e.sent,n=s.appState,t.error=null,a(n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),t.error=e.t0;case 16:return e.prev=16,e.next=19,t.auth0Client.isAuthenticated();case 19:return t.isAuthenticated=e.sent,e.next=22,t.auth0Client.getUser();case 22:return t.user=e.sent,t.loading=!1,e.finish(16);case 25:case"end":return e.stop()}}),e,null,[[3,13,16,25]])})))()}}),he)},De={install:function(t,e){t.prototype.$auth=Re(e)}};a("ed18").config(),console.log("ENV PROCESS========================",Object({NODE_ENV:"production",VUE_APP_API_URL:"https://sdprin-casting-agency-backend.herokuapp.com/",BASE_URL:"/"})),s["default"].use(_e.a),s["default"].use(De,{domain:Ce["c"],clientId:Ce["b"],audience:Ce["a"],redirectUri:Ce["d"],onRedirectCallback:function(t){ve.push(t&&t.targetPath?t.targetPath:window.location.pathname)}}),s["default"].config.productionTip=!1,s["default"].use(ge["a"]),s["default"].use(fe["a"]),new s["default"]({router:ve,store:J,render:function(t){return t(u)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";a("00f5")},8160:function(t){t.exports=JSON.parse('{"c":"dev-ciko6qxd.us.auth0.com","b":"NHLb3O0L2oJgq1uBsdZAbDgPZjsRem67","a":"casting_agency","d":"https://127.0.0.1:8085"}')},ddb8:function(t,e){}});
//# sourceMappingURL=app.fb01fb24.js.map